<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/icon211.png">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="BSK10">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#2c3e50">
    <title>–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å—Ç–∞–≤–æ–∫ PRO</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        :root {
            --primary: #2c3e50;
            --secondary: #e74c3c;
            --success: #27ae60;
            --danger: #e74c3c;
            --warning: #f39c12;
            --info: #3498db;
            --light: #f8f9fa;
            --dark: #2c3e50;
            --background: linear-gradient(135deg, #1a2a6c, #2c3e50);
            --card-bg: rgba(255, 255, 255, 0.98);
            --text-color: #333;
            --border-color: #ddd;
        }
        
        .dark-theme {
            --primary: #3498db;
            --secondary: #e74c3c;
            --success: #2ecc71;
            --danger: #e74c3c;
            --warning: #f39c12;
            --info: #3498db;
            --light: #34495e;
            --dark: #ecf0f1;
            --background: linear-gradient(135deg, #1a1a2e, #0d0d1a);
            --card-bg: rgba(26, 26, 46, 0.95);
            --text-color: #ecf0f1;
            --border-color: #2c3e50;
        }
        
        .bookmaker-theme {
            --primary: #1a5fb4;
            --secondary: #c64600;
            --success: #26a269;
            --danger: #c01c28;
            --warning: #e5a50a;
            --info: #1a5fb4;
            --light: #f6f5f4;
            --dark: #241f31;
            --background: #f6f5f4;
            --card-bg: #ffffff;
            --text-color: #241f31;
            --border-color: #deddda;
        }
        
        html {
            height: 100%;
            background: var(--background);
        }
        
        body {
            background: var(--background);
            color: var(--text-color);
            min-height: 100vh;
            min-height: -webkit-fill-available;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            -webkit-text-size-adjust: none;
            text-size-adjust: none;
            transition: background 0.5s ease, color 0.5s ease;
            padding: 0;
            margin: 0;
        }
        
        .container {
            width: 100%;
            max-width: 500px;
            background: var(--card-bg);
            border-radius: 0;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            transition: all 0.5s ease;
            min-height: 100vh;
            position: relative;
        }
        
        @media (min-width: 501px) {
            body {
                padding: 15px 0;
                align-items: flex-start;
            }
            
            .container {
                border-radius: 16px;
                min-height: auto;
                margin: 0 auto;
            }
        }
        
        header {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px 20px 18px;
            text-align: center;
            position: relative;
            padding-top: max(20px, env(safe-area-inset-top));
        }
        
        .header-controls {
            position: absolute;
            top: max(15px, env(safe-area-inset-top));
            right: 15px;
            display: flex;
            gap: 10px;
        }
        
        .theme-toggle, .info-btn, .bookmaker-toggle {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            font-size: 1.2rem;
        }
        
        .theme-toggle:hover, .info-btn:hover, .bookmaker-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(30deg);
        }
        
        h1 {
            font-size: 1.5rem;
            margin-bottom: 5px;
            font-weight: 700;
        }
        
        .subtitle {
            font-size: 0.85rem;
            opacity: 0.9;
        }
        
        .main-content {
            padding: 18px;
            padding-bottom: max(18px, env(safe-area-inset-bottom));
        }
        
        .input-section {
            margin-bottom: 20px;
        }
        
        .section-title {
            color: var(--primary);
            margin-bottom: 12px;
            padding-bottom: 6px;
            border-bottom: 2px solid var(--primary);
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 15px;
        }
        
        .input-group {
            margin-bottom: 12px;
        }
        
        .input-label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: var(--primary);
            font-size: 0.9rem;
        }
        
        .input-field {
            width: 100%;
            padding: 12px 14px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
            background: var(--card-bg);
            color: var(--text-color);
            font-size: 16px;
            transition: border-color 0.3s;
            -webkit-appearance: none;
            appearance: none;
            caret-color: transparent;
            cursor: pointer;
        }
        
        .input-field:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        .input-row {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .input-row .input-field {
            flex: 1;
        }
        
        .input-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--primary);
            color: white;
            padding: 0 12px;
            height: 44px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .league-selector {
            margin-bottom: 15px;
            padding: 12px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 10px;
        }
        
        .league-options {
            display: flex;
            gap: 8px;
            margin-top: 8px;
        }
        
        .league-option {
            flex: 1;
            padding: 10px 8px;
            text-align: center;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.85rem;
            font-weight: 500;
            background: var(--card-bg);
            color: var(--text-color);
        }
        
        .league-option.active {
            border-color: var(--primary);
            background: rgba(52, 152, 219, 0.2);
            font-weight: 600;
        }
        
        .bet-type-selector {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .bet-type-btn {
            flex: 1;
            padding: 12px;
            text-align: center;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            background: var(--card-bg);
            color: var(--text-color);
        }
        
        .bet-type-btn.active {
            border-color: var(--primary);
            background: rgba(52, 152, 219, 0.2);
        }
        
        .ml-controls {
            margin-top: 15px;
            padding: 12px;
            background: rgba(155, 89, 182, 0.1);
            border-radius: 10px;
            border-left: 4px solid #9b59b6;
        }
        
        .ml-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .ml-status {
            font-size: 0.85rem;
            color: var(--text-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .ml-status.active {
            color: #9b59b6;
            font-weight: 600;
        }
        
        .ml-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            font-size: 0.8rem;
        }
        
        .ml-stat {
            display: flex;
            justify-content: space-between;
            padding: 4px 0;
        }
        
        .ml-stat-value {
            font-weight: 600;
            color: var(--primary);
        }
        
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #9b59b6;
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        
        .results-section {
            padding: 18px;
            background: var(--light);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-bottom: 18px;
        }
        
        .result-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 15px;
        }
        
        .result-card {
            padding: 12px;
            border-radius: 10px;
            background: var(--card-bg);
            text-align: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .result-title {
            font-size: 0.8rem;
            color: var(--primary);
            margin-bottom: 6px;
            font-weight: 600;
        }
        
        .result-value {
            font-size: 1.2rem;
            font-weight: 700;
        }
        
        .positive {
            color: var(--success);
        }
        
        .negative {
            color: var(--danger);
        }
        
        .neutral {
            color: var(--info);
        }
        
        .ml-enhanced {
            color: #9b59b6;
        }
        
        .recommendation {
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            color: white;
            margin-top: 15px;
        }
        
        .recommendation.strong-buy {
            background: linear-gradient(90deg, var(--success), #2ecc71);
        }
        
        .recommendation.buy {
            background: linear-gradient(90deg, var(--info), #3498db);
        }
        
        .recommendation.avoid {
            background: linear-gradient(90deg, var(--danger), #c0392b);
        }
        
        .recommendation.ml-enhanced {
            background: linear-gradient(90deg, #9b59b6, #8e44ad);
            position: relative;
            overflow: hidden;
        }
        
        .ml-badge {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 255, 255, 0.3);
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        
        .recommendation-title {
            font-size: 1.2rem;
            margin-bottom: 8px;
            font-weight: 700;
        }
        
        .confidence-meter {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 10px;
        }
        
        .confidence-text {
            margin-right: 10px;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .confidence-bar {
            width: 100px;
            height: 8px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .confidence-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
            background: white;
        }
        
        .confidence-value {
            margin-left: 10px;
            font-weight: 700;
            font-size: 1rem;
        }
        
        .details {
            margin-top: 15px;
            padding: 12px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 10px;
        }
        
        .details-title {
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }
        
        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            font-size: 0.85rem;
        }
        
        .detail-label {
            color: var(--text-color);
        }
        
        .detail-value {
            font-weight: 600;
            color: var(--primary);
            text-align: right;
        }
        
        .ml-correction {
            margin-top: 10px;
            padding: 8px;
            background: rgba(155, 89, 182, 0.1);
            border-radius: 6px;
            font-size: 0.8rem;
            display: flex;
            justify-content: space-between;
        }
        
        .deviation-explanation {
            margin-top: 15px;
            padding: 12px;
            background: rgba(243, 156, 18, 0.1);
            border-radius: 10px;
            font-size: 0.85rem;
        }
        
        .explanation-title {
            font-weight: 700;
            color: #f39c12;
            margin-bottom: 6px;
        }
        
        .explanation-text {
            margin-bottom: 6px;
            line-height: 1.4;
            color: var(--text-color);
        }
        
        .history-section {
            margin-top: 18px;
        }
        
        .history-list {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 10px;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 8px;
            background: var(--card-bg);
        }
        
        .history-item {
            padding: 10px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
        }
        
        .history-item:last-child {
            border-bottom: none;
        }
        
        .history-prediction {
            font-weight: 600;
            color: var(--text-color);
        }
        
        .history-details {
            font-size: 0.75rem;
            color: var(--text-color);
            opacity: 0.7;
            margin-top: 3px;
        }
        
        .history-confidence {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 700;
            min-width: 50px;
            text-align: center;
        }
        
        .history-confidence.positive {
            background: rgba(39, 174, 96, 0.2);
            color: var(--success);
        }
        
        .history-confidence.negative {
            background: rgba(231, 76, 60, 0.2);
            color: var(--danger);
        }
        
        .history-confidence.neutral {
            background: rgba(52, 152, 219, 0.2);
            color: var(--info);
        }
        
        .history-confidence.ml-enhanced {
            background: rgba(155, 89, 182, 0.2);
            color: #9b59b6;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 18px;
        }
        
        .btn {
            flex: 1;
            padding: 14px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: #1c2833;
        }
        
        .btn-secondary {
            background: var(--light);
            color: var(--dark);
            border: 1px solid var(--border-color);
        }
        
        .btn-secondary:hover {
            background: #d5dbdb;
        }
        
        .btn-ml {
            background: #9b59b6;
            color: white;
        }
        
        .btn-ml:hover {
            background: #8e44ad;
        }
        
        .success-animation {
            animation: successPulse 0.5s ease-in-out;
        }
        
        @keyframes successPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .ml-glow {
            animation: mlGlow 2s infinite alternate;
        }
        
        @keyframes mlGlow {
            from { box-shadow: 0 0 5px rgba(155, 89, 182, 0.5); }
            to { box-shadow: 0 0 15px rgba(155, 89, 182, 0.8); }
        }
        
        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: var(--card-bg);
            border-radius: 16px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 25px;
            position: relative;
            transform: translateY(20px);
            transition: transform 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-color);
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.3s;
        }
        
        .modal-close:hover {
            background: rgba(0, 0, 0, 0.1);
        }
        
        .modal-title {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.5rem;
            text-align: center;
            font-weight: 700;
        }
        
        .instruction-section {
            margin-bottom: 25px;
        }
        
        .instruction-title {
            color: var(--primary);
            margin-bottom: 12px;
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .instruction-title i {
            color: var(--info);
        }
        
        .instruction-text {
            line-height: 1.6;
            margin-bottom: 10px;
            color: var(--text-color);
        }
        
        .instruction-list {
            padding-left: 20px;
            margin-bottom: 15px;
        }
        
        .instruction-list li {
            margin-bottom: 8px;
            line-height: 1.5;
            color: var(--text-color);
        }
        
        .strategy-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 15px;
        }
        
        .strategy-card {
            padding: 15px;
            border-radius: 10px;
            background: rgba(52, 152, 219, 0.1);
            border-left: 4px solid var(--info);
        }
        
        .strategy-card.strong-buy {
            background: rgba(39, 174, 96, 0.1);
            border-left-color: var(--success);
        }
        
        .strategy-card.buy {
            background: rgba(52, 152, 219, 0.1);
            border-left-color: var(--info);
        }
        
        .strategy-card.avoid {
            background: rgba(231, 76, 60, 0.1);
            border-left-color: var(--danger);
        }
        
        .strategy-card.ml-enhanced {
            background: rgba(155, 89, 182, 0.1);
            border-left-color: #9b59b6;
        }
        
        .strategy-title {
            font-weight: 700;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }
        
        .strategy-desc {
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .tips-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }
        
        .tip-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 10px;
            background: rgba(243, 156, 18, 0.1);
            border-radius: 8px;
        }
        
        .tip-icon {
            color: var(--warning);
            font-size: 1.2rem;
            margin-top: 2px;
        }
        
        .tip-text {
            flex: 1;
            line-height: 1.5;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ñ–æ—Ä–º—ã —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å—á–µ—Ç–∞ */
        .real-score-section {
            margin-top: 15px;
            padding: 12px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }
        
        .real-score-inputs {
            display: flex;
            gap: 8px;
            align-items: center;
            margin-top: 8px;
        }
        
        .real-score-inputs .input-field {
            flex: 1;
        }
        
        .save-real-score-btn {
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 15px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
        }
        
        .save-real-score-btn:hover {
            background: #2980b9;
        }
        
        .ml-feedback-section {
            margin-top: 15px;
            padding: 12px;
            background: rgba(155, 89, 182, 0.1);
            border-radius: 10px;
            border-left: 4px solid #9b59b6;
        }
        
        .ml-feedback-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }
        
        .feedback-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            font-size: 0.85rem;
        }
        
        .feedback-label {
            color: var(--text-color);
        }
        
        .feedback-value {
            font-weight: 600;
            color: var(--primary);
        }
        
        .feedback-value.positive {
            color: var(--success);
        }
        
        .feedback-value.negative {
            color: var(--danger);
        }
        
        /* –ö–∞—Å—Ç–æ–º–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ */
        .custom-keyboard {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--card-bg);
            border-top: 1px solid var(--border-color);
            padding: 10px;
            box-shadow: 0 -5px 15px rgba(0, 0, 0, 0.1);
            z-index: 999;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            padding-bottom: max(10px, env(safe-area-inset-bottom));
        }
        
        .custom-keyboard.active {
            transform: translateY(0);
        }
        
        .keyboard-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .keyboard-btn {
            flex: 1;
            margin: 0 4px;
            height: 50px;
            border: none;
            border-radius: 8px;
            background: var(--light);
            color: var(--text-color);
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .keyboard-btn:active {
            background: var(--primary);
            color: white;
            transform: scale(0.95);
        }
        
        .keyboard-btn.double {
            flex: 2;
        }
        
        .keyboard-btn.action {
            background: var(--primary);
            color: white;
        }
        
        .keyboard-btn.action:active {
            background: var(--secondary);
        }
        
        .keyboard-btn.special {
            background: var(--warning);
            color: white;
        }
        
        .keyboard-btn.special:active {
            background: #e67e22;
        }
        
        .keyboard-close {
            position: absolute;
            top: -40px;
            right: 10px;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .keyboard-close:active {
            background: var(--light);
        }
        
        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è iPhone */
        @media (max-width: 500px) {
            .container {
                max-width: 100%;
            }
            
            .input-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .result-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .league-options {
                flex-direction: column;
            }
            
            .confidence-meter {
                flex-direction: column;
                gap: 8px;
            }
            
            .confidence-bar {
                width: 100%;
            }
            
            .details-grid {
                grid-template-columns: 1fr;
                gap: 5px;
            }
            
            .ml-stats {
                grid-template-columns: 1fr;
            }
            
            .history-list {
                max-height: 150px;
            }
            
            .modal-content {
                padding: 20px;
            }
            
            .header-controls {
                gap: 5px;
            }
            
            .keyboard-btn {
                height: 45px;
                font-size: 1.1rem;
            }
        }
        
        /* –î–ª—è —Ü–∏—Ñ—Ä–æ–≤–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –Ω–∞ iOS */
        input[type="number"] {
            -webkit-appearance: none;
            appearance: none;
        }
        
        input[inputmode="numeric"] {
            -webkit-appearance: none;
            appearance: none;
        }
        
        .theme-transition {
            transition: all 0.5s ease;
        }
        
        /* –ù–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤ */
        .stat-methods {
            margin-top: 15px;
            padding: 12px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }
        
        .method-selector {
            display: flex;
            gap: 8px;
            margin-top: 8px;
        }
        
        .method-option {
            flex: 1;
            padding: 10px 8px;
            text-align: center;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.8rem;
            font-weight: 500;
            background: var(--card-bg);
            color: var(--text-color);
        }
        
        .method-option.active {
            border-color: var(--primary);
            background: rgba(52, 152, 219, 0.2);
            font-weight: 600;
        }
        
        .confidence-interval {
            margin-top: 10px;
            padding: 8px;
            background: rgba(243, 156, 18, 0.1);
            border-radius: 6px;
            font-size: 0.8rem;
            text-align: center;
        }
        
        .simulation-results {
            margin-top: 10px;
            padding: 8px;
            background: rgba(39, 174, 96, 0.1);
            border-radius: 6px;
            font-size: 0.8rem;
        }
        
        .simulation-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-top: 8px;
        }
        
        .simulation-stat {
            display: flex;
            justify-content: space-between;
            padding: 4px 0;
            font-size: 0.75rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-controls">
                <button class="info-btn" id="info-btn">
                    <i class="fas fa-info"></i>
                </button>
                <button class="bookmaker-toggle" id="bookmaker-toggle">
                    <i class="fas fa-palette"></i>
                </button>
                <button class="theme-toggle" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
            <h1>–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å—Ç–∞–≤–æ–∫ PRO</h1>
            <div class="subtitle">AI-–∞–Ω–∞–ª–∏–∑ —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏</div>
        </header>
        
        <div class="main-content">
            <div class="input-section">
                <h2 class="section-title">–î–∞–Ω–Ω—ã–µ –º–∞—Ç—á–∞</h2>
                
                <div class="league-selector">
                    <div class="input-label">–õ–∏–≥–∞:</div>
                    <div class="league-options">
                        <div class="league-option active" data-league="nba">NBA (4√ó12)</div>
                        <div class="league-option" data-league="fib–∞">–§–ò–ë–ê (4√ó10)</div>
                        <div class="league-option" data-league="cyber">–ö–∏–±–µ—Ä (4√ó5)</div>
                    </div>
                </div>
                
                <div class="input-grid">
                    <div class="input-group">
                        <label class="input-label">–¢–µ–∫—É—â–∏–π —Å—á–µ—Ç</label>
                        <div class="input-row">
                            <input type="text" class="input-field" id="score1" placeholder="0" min="0" inputmode="none" readonly>
                            <div class="input-icon">:</div>
                            <input type="text" class="input-field" id="score2" placeholder="0" min="0" inputmode="none" readonly>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">–ü–µ—Ä–∏–æ–¥</label>
                        <select class="input-field" id="period">
                            <option value="1">1-—è —á–µ—Ç–≤–µ—Ä—Ç—å</option>
                            <option value="2">2-—è —á–µ—Ç–≤–µ—Ä—Ç—å</option>
                            <option value="3">3-—è —á–µ—Ç–≤–µ—Ä—Ç—å</option>
                            <option value="4">4-—è —á–µ—Ç–≤–µ—Ä—Ç—å</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">–í—Ä–µ–º—è –≤ —á–µ—Ç–≤–µ—Ä—Ç–∏</label>
                        <div class="input-row">
                            <input type="text" class="input-field" id="minutes" placeholder="–º–∏–Ω" min="0" max="12" inputmode="none" readonly>
                            <div class="input-icon">:</div>
                            <input type="text" class="input-field" id="seconds" placeholder="—Å–µ–∫" min="0" max="59" inputmode="none" readonly>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">–¢–æ—Ç–∞–ª –±—É–∫–º–µ–∫–µ—Ä–∞</label>
                        <input type="text" class="input-field" id="line-total" placeholder="215.5" step="0.1" inputmode="none" readonly>
                    </div>
                </div>
                
                <div class="input-group">
                    <label class="input-label">–¢–∏–ø —Å—Ç–∞–≤–∫–∏</label>
                    <div class="bet-type-selector">
                        <div class="bet-type-btn active" id="bet-over">–¢–ë (–¢–æ—Ç–∞–ª –±–æ–ª—å—à–µ)</div>
                        <div class="bet-type-btn" id="bet-under">–¢–ú (–¢–æ—Ç–∞–ª –º–µ–Ω—å—à–µ)</div>
                    </div>
                </div>
                
                <div class="stat-methods">
                    <div class="input-label">–°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã:</div>
                    <div class="method-selector">
                        <div class="method-option active" data-method="poisson">–ü—É–∞—Å—Å–æ–Ω</div>
                        <div class="method-option" data-method="adjusted">Adjusted Ratings</div>
                        <div class="method-option" data-method="montecarlo">Monte-Carlo</div>
                    </div>
                </div>
                
                <div class="ml-controls">
                    <div class="ml-toggle">
                        <div class="ml-status" id="ml-status">
                            <i class="fas fa-brain"></i>
                            <span>ML-–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞</span>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="ml-toggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="ml-stats">
                        <div class="ml-stat">
                            <span>–¢–æ—á–Ω–æ—Å—Ç—å ML:</span>
                            <span class="ml-stat-value" id="ml-accuracy">--%</span>
                        </div>
                        <div class="ml-stat">
                            <span>–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞:</span>
                            <span class="ml-stat-value" id="ml-adjustment">--%</span>
                        </div>
                        <div class="ml-stat">
                            <span>–ê–Ω–∞–ª–∏–∑–æ–≤ –≤ –±–∞–∑–µ:</span>
                            <span class="ml-stat-value" id="ml-data-count">0</span>
                        </div>
                        <div class="ml-stat">
                            <span>–£–ª—É—á—à–µ–Ω–∏–µ:</span>
                            <span class="ml-stat-value" id="ml-improvement">+--%</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="real-score-section">
                <div class="input-label">–†–µ–∞–ª—å–Ω—ã–π –∏—Ç–æ–≥–æ–≤—ã–π —Å—á–µ—Ç (–ø–æ—Å–ª–µ –º–∞—Ç—á–∞)</div>
                <div class="real-score-inputs">
                    <input type="text" class="input-field" id="real-score1" placeholder="0" min="0" inputmode="none" readonly>
                    <div class="input-icon">:</div>
                    <input type="text" class="input-field" id="real-score2" placeholder="0" min="0" inputmode="none" readonly>
                    <button class="save-real-score-btn" id="save-real-score-btn">
                        <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                    </button>
                </div>
            </div>
            
            <div class="ml-feedback-section">
                <div class="input-label">ML-–æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</div>
                <div class="ml-feedback-grid">
                    <div class="feedback-item">
                        <span class="feedback-label">–ü—Ä–æ–≥–Ω–æ–∑ vs –†–µ–∞–ª—å–Ω–æ—Å—Ç—å:</span>
                        <span class="feedback-value neutral" id="prediction-accuracy">--</span>
                    </div>
                    <div class="feedback-item">
                        <span class="feedback-label">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</span>
                        <span class="feedback-value neutral" id="recommendation-accuracy">--</span>
                    </div>
                    <div class="feedback-item">
                        <span class="feedback-label">–û—à–∏–±–∫–∞ –ø—Ä–æ–≥–Ω–æ–∑–∞:</span>
                        <span class="feedback-value neutral" id="prediction-error">--</span>
                    </div>
                    <div class="feedback-item">
                        <span class="feedback-label">–°—Ç–∞—Ç—É—Å –æ–±—É—á–µ–Ω–∏—è:</span>
                        <span class="feedback-value neutral" id="training-status">–ù–µ –æ–±—É—á–µ–Ω–æ</span>
                    </div>
                </div>
            </div>
            
            <div class="results-section">
                <h2 class="section-title">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞</h2>
                
                <div class="result-grid">
                    <div class="result-card">
                        <div class="result-title">–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—ã–π —Ç–æ—Ç–∞–ª</div>
                        <div class="result-value neutral" id="predicted-total">--</div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-title">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å</div>
                        <div class="result-value neutral" id="probability-value">--%</div>
                    </div>
                </div>
                
                <div class="confidence-interval" id="confidence-interval" style="display: none;">
                    –î–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª: <span id="interval-value">--</span>
                </div>
                
                <div class="simulation-results" id="simulation-results" style="display: none;">
                    <div class="input-label">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∏–º—É–ª—è—Ü–∏–∏:</div>
                    <div class="simulation-stats">
                        <div class="simulation-stat">
                            <span>–°—Ä–µ–¥–Ω–µ–µ:</span>
                            <span id="sim-mean">--</span>
                        </div>
                        <div class="simulation-stat">
                            <span>–ú–µ–¥–∏–∞–Ω–∞:</span>
                            <span id="sim-median">--</span>
                        </div>
                        <div class="simulation-stat">
                            <span>–°—Ç–∞–Ω–¥. –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ:</span>
                            <span id="sim-std">--</span>
                        </div>
                        <div class="simulation-stat">
                            <span>–ö–æ–ª-–≤–æ —Å–∏–º—É–ª—è—Ü–∏–π:</span>
                            <span id="sim-count">--</span>
                        </div>
                    </div>
                </div>
                
                <div class="recommendation" id="recommendation">
                    <div class="recommendation-title" id="recommendation-text">–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞</div>
                    <div class="confidence-meter">
                        <span class="confidence-text">–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å:</span>
                        <div class="confidence-bar">
                            <div class="confidence-fill" id="confidence-bar" style="width: 0%"></div>
                        </div>
                        <span class="confidence-value" id="confidence-value">0%</span>
                    </div>
                    <div class="ml-badge" id="ml-badge" style="display: none;">AI Enhanced</div>
                </div>
                
                <div class="ml-correction" id="ml-correction" style="display: none;">
                    <span>ML-–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏:</span>
                    <span class="ml-stat-value" id="ml-correction-value">+0%</span>
                </div>
                
                <div class="details">
                    <div class="details-title">–î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞</div>
                    <div class="details-grid">
                        <div class="detail-item">
                            <span class="detail-label">–ú–µ—Ç–æ–¥ —Ä–∞—Å—á–µ—Ç–∞:</span>
                            <span class="detail-value" id="method-used">--</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">–¢–µ–º–ø –∏–≥—Ä—ã:</span>
                            <span class="detail-value" id="pace-value">-- –æ—á/–º–∏–Ω</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">–û—Å—Ç–∞–ª–æ—Å—å –≤—Ä–µ–º–µ–Ω–∏:</span>
                            <span class="detail-value" id="time-left">-- –º–∏–Ω</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">–¢–∏–ø –ª–∏–≥–∏:</span>
                            <span class="detail-value" id="league-type">NBA</span>
                        </div>
                    </div>
                </div>
                
                <div class="deviation-explanation">
                    <div class="explanation-title">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑</div>
                    <div class="explanation-text">
                        <strong>Poisson Regression</strong> - –º–æ–¥–µ–ª–∏—Ä—É–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—á–∫–æ–≤ –ø–æ –∑–∞–∫–æ–Ω—É –ü—É–∞—Å—Å–æ–Ω–∞
                    </div>
                    <div class="explanation-text">
                        <strong>Adjusted Ratings</strong> - —É—á–∏—Ç—ã–≤–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∞—Ç–∞–∫–∏ –∏ –∑–∞—â–∏—Ç—ã –∫–æ–º–∞–Ω–¥
                    </div>
                    <div class="explanation-text">
                        <strong>Monte-Carlo</strong> - —Å–∏–º—É–ª–∏—Ä—É–µ—Ç —Ç—ã—Å—è—á–∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π
                    </div>
                </div>
            </div>
            
            <div class="history-section">
                <h2 class="section-title">–ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—á–µ—Ç–æ–≤</h2>
                <div class="history-list" id="history-list">
                    <!-- –ò—Å—Ç–æ—Ä–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-primary" id="calculate-btn">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
                <button class="btn btn-secondary" id="clear-btn">–û—á–∏—Å—Ç–∏—Ç—å</button>
                <button class="btn btn-ml" id="ml-train-btn">–û–±—É—á–∏—Ç—å ML</button>
            </div>
        </div>
    </div>

    <!-- –ö–∞—Å—Ç–æ–º–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ -->
    <div class="custom-keyboard" id="custom-keyboard">
        <button class="keyboard-close" id="keyboard-close">
            <i class="fas fa-times"></i>
        </button>
        <div class="keyboard-row">
            <button class="keyboard-btn" data-value="1">1</button>
            <button class="keyboard-btn" data-value="2">2</button>
            <button class="keyboard-btn" data-value="3">3</button>
            <button class="keyboard-btn action" data-action="backspace">
                <i class="fas fa-backspace"></i>
            </button>
        </div>
        <div class="keyboard-row">
            <button class="keyboard-btn" data-value="4">4</button>
            <button class="keyboard-btn" data-value="5">5</button>
            <button class="keyboard-btn" data-value="6">6</button>
            <button class="keyboard-btn action" data-action="clear">
                C
            </button>
        </div>
        <div class="keyboard-row">
            <button class="keyboard-btn" data-value="7">7</button>
            <button class="keyboard-btn" data-value="8">8</button>
            <button class="keyboard-btn" data-value="9">9</button>
            <button class="keyboard-btn special" data-action="done">
                –ì–æ—Ç–æ–≤–æ
            </button>
        </div>
        <div class="keyboard-row">
            <button class="keyboard-btn double" data-value="0">0</button>
            <button class="keyboard-btn" data-value=".">.</button>
            <button class="keyboard-btn action" data-action="delete">
                <i class="fas fa-trash"></i>
            </button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ -->
    <div class="modal-overlay" id="instruction-modal">
        <div class="modal-content">
            <button class="modal-close" id="modal-close">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="modal-title">ü§ñ AI –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å—Ç–∞–≤–æ–∫ PRO</h2>
            
            <div class="instruction-section">
                <h3 class="instruction-title"><i class="fas fa-chart-line"></i> –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∞–Ω–∞–ª–∏–∑–∞</h3>
                <p class="instruction-text">–¢–µ–ø–µ—Ä—å –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–¥–æ–≤—ã–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã—Ö –ø—Ä–æ–≥–Ω–æ–∑–æ–≤:</p>
                
                <div class="strategy-card ml-enhanced">
                    <div class="strategy-title">üìä POISSON REGRESSION</div>
                    <div class="strategy-desc">
                        –ú–æ–¥–µ–ª–∏—Ä—É–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—á–∫–æ–≤ –ø–æ –∑–∞–∫–æ–Ω—É –ü—É–∞—Å—Å–æ–Ω–∞:<br>
                        ‚Ä¢ <strong>Œª-–ø–∞—Ä–∞–º–µ—Ç—Ä</strong> - —Å—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—á–∫–æ–≤ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É –≤—Ä–µ–º–µ–Ω–∏<br>
                        ‚Ä¢ <strong>–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ</strong> - –æ—Ü–µ–Ω–∫–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ö–æ–¥–æ–≤<br>
                        ‚Ä¢ <strong>–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞ –¥–∏—Å–ø–µ—Ä—Å–∏—é</strong> - —É—á–µ—Ç –∫–æ–ª–µ–±–∞–Ω–∏–π –≤ —Ç–µ–º–ø–µ –∏–≥—Ä—ã
                    </div>
                </div>
                
                <div class="strategy-card strong-buy">
                    <div class="strategy-title">‚öñÔ∏è ADJUSTED RATINGS</div>
                    <div class="strategy-desc">
                        –£—á–∏—Ç—ã–≤–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∞—Ç–∞–∫–∏ –∏ –∑–∞—â–∏—Ç—ã:<br>
                        ‚Ä¢ <strong>Offensive Rating</strong> - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∞—Ç–∞–∫–∏ –∫–æ–º–∞–Ω–¥<br>
                        ‚Ä¢ <strong>Defensive Rating</strong> - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞—â–∏—Ç—ã –∫–æ–º–∞–Ω–¥<br>
                        ‚Ä¢ <strong>Net Rating</strong> - —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –∞—Ç–∞–∫–æ–π –∏ –∑–∞—â–∏—Ç–æ–π
                    </div>
                </div>
                
                <div class="strategy-card buy">
                    <div class="strategy-title">üé≤ MONTE-CARLO SIMULATION</div>
                    <div class="strategy-desc">
                        –°–∏–º—É–ª–∏—Ä—É–µ—Ç —Ç—ã—Å—è—á–∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Ä–∞–∑–≤–∏—Ç–∏—è –º–∞—Ç—á–∞:<br>
                        ‚Ä¢ <strong>1000+ —Å–∏–º—É–ª—è—Ü–∏–π</strong> - —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏ –∑–Ω–∞—á–∏–º–∞—è –≤—ã–±–æ—Ä–∫–∞<br>
                        ‚Ä¢ <strong>–î–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã</strong> - –æ—Ü–µ–Ω–∫–∞ —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≥–Ω–æ–∑–∞<br>
                        ‚Ä¢ <strong>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π</strong> - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∏—Å—Ö–æ–¥–æ–≤
                    </div>
                </div>
            </div>
            
            <div class="instruction-section">
                <h3 class="instruction-title"><i class="fas fa-play-circle"></i> –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä</h3>
                <p class="instruction-text">–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å—Ç–∞–≤–æ–∫ PRO —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Ç–æ—Ç–∞–ª–æ–≤ –≤ –±–∞—Å–∫–µ—Ç–±–æ–ª–µ.</p>
                
                <ol class="instruction-list">
                    <li><strong>–í—ã–±–µ—Ä–∏—Ç–µ –ª–∏–≥—É</strong> - —É–∫–∞–∂–∏—Ç–µ —Ç–∏–ø –±–∞—Å–∫–µ—Ç–±–æ–ª—å–Ω–æ–π –ª–∏–≥–∏</li>
                    <li><strong>–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—É—â–∏–π —Å—á–µ—Ç –∏ –≤—Ä–µ–º—è</strong> - –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –º–∞—Ç—á–∞</li>
                    <li><strong>–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥</strong> - Poisson, Adjusted Ratings –∏–ª–∏ Monte-Carlo</li>
                    <li><strong>–í–≤–µ–¥–∏—Ç–µ —Ç–æ—Ç–∞–ª –±—É–∫–º–µ–∫–µ—Ä–∞</strong> - –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–æ—Ç–∞–ª–∞ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è</li>
                    <li><strong>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Å—Ç–∞–≤–∫–∏</strong> - –¢–ë (—Ç–æ—Ç–∞–ª –±–æ–ª—å—à–µ) –∏–ª–∏ –¢–ú (—Ç–æ—Ç–∞–ª –º–µ–Ω—å—à–µ)</li>
                    <li><strong>–ù–∞–∂–º–∏—Ç–µ "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å"</strong> - –ø–æ–ª—É—á–∏—Ç–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑</li>
                    <li><strong>–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã</strong> - –æ—Ü–µ–Ω–∏—Ç–µ —Ç–æ—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≥–Ω–æ–∑–∞</li>
                </ol>
            </div>
            
            <div class="instruction-section">
                <h3 class="instruction-title"><i class="fas fa-lightbulb"></i> –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</h3>
                
                <div class="tips-grid">
                    <div class="tip-item">
                        <div class="tip-icon"><i class="fas fa-percentage"></i></div>
                        <div class="tip-text">
                            <strong>–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å > 60%</strong> - —Å–∏–ª—å–Ω—ã–π —Å–∏–≥–Ω–∞–ª –¥–ª—è —Å—Ç–∞–≤–∫–∏. –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤—ã—Å–æ–∫–∞—è.
                        </div>
                    </div>
                    
                    <div class="tip-item">
                        <div class="tip-icon"><i class="fas fa-chart-bar"></i></div>
                        <div class="tip-text">
                            <strong>–î–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª</strong> –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω, –≤ –∫–æ—Ç–æ—Ä–æ–º —Å 95% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é –æ–∫–∞–∂–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ—Ç–∞–ª.
                        </div>
                    </div>
                    
                    <div class="tip-item">
                        <div class="tip-icon"><i class="fas fa-dice"></i></div>
                        <div class="tip-text">
                            <strong>Monte-Carlo —Å–∏–º—É–ª—è—Ü–∏—è</strong> –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–∞ –≤ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö –º–∞—Ç—á–∞—Ö —Å –≤—ã—Å–æ–∫–∏–º —Ç–µ–º–ø–æ–º.
                        </div>
                    </div>
                    
                    <div class="tip-item">
                        <div class="tip-icon"><i class="fas fa-balance-scale"></i></div>
                        <div class="tip-text">
                            <strong>Adjusted Ratings</strong> –ª—É—á—à–µ –≤—Å–µ–≥–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–≥–¥–∞ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –æ–± —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
            const themeToggle = document.getElementById('theme-toggle');
            const themeIcon = themeToggle.querySelector('i');
            const bookmakerToggle = document.getElementById('bookmaker-toggle');
            const bookmakerIcon = bookmakerToggle.querySelector('i');
            const infoBtn = document.getElementById('info-btn');
            const instructionModal = document.getElementById('instruction-modal');
            const modalClose = document.getElementById('modal-close');
            
            const score1Input = document.getElementById('score1');
            const score2Input = document.getElementById('score2');
            const periodSelect = document.getElementById('period');
            const minutesInput = document.getElementById('minutes');
            const secondsInput = document.getElementById('seconds');
            const lineTotalInput = document.getElementById('line-total');
            const betOverBtn = document.getElementById('bet-over');
            const betUnderBtn = document.getElementById('bet-under');
            const calculateBtn = document.getElementById('calculate-btn');
            const clearBtn = document.getElementById('clear-btn');
            const leagueOptions = document.querySelectorAll('.league-option');
            const methodOptions = document.querySelectorAll('.method-option');
            
            // ML —ç–ª–µ–º–µ–Ω—Ç—ã
            const mlToggle = document.getElementById('ml-toggle');
            const mlStatus = document.getElementById('ml-status');
            const mlAccuracy = document.getElementById('ml-accuracy');
            const mlAdjustment = document.getElementById('ml-adjustment');
            const mlDataCount = document.getElementById('ml-data-count');
            const mlImprovement = document.getElementById('ml-improvement');
            const mlTrainBtn = document.getElementById('ml-train-btn');
            const mlBadge = document.getElementById('ml-badge');
            const mlCorrection = document.getElementById('ml-correction');
            const mlCorrectionValue = document.getElementById('ml-correction-value');
            
            // –≠–ª–µ–º–µ–Ω—Ç—ã —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å—á–µ—Ç–∞
            const realScore1Input = document.getElementById('real-score1');
            const realScore2Input = document.getElementById('real-score2');
            const saveRealScoreBtn = document.getElementById('save-real-score-btn');
            
            // –≠–ª–µ–º–µ–Ω—Ç—ã –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ ML
            const predictionAccuracyEl = document.getElementById('prediction-accuracy');
            const recommendationAccuracyEl = document.getElementById('recommendation-accuracy');
            const predictionErrorEl = document.getElementById('prediction-error');
            const trainingStatusEl = document.getElementById('training-status');
            
            // –≠–ª–µ–º–µ–Ω—Ç—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            const predictedTotalEl = document.getElementById('predicted-total');
            const probabilityValueEl = document.getElementById('probability-value');
            const recommendationEl = document.getElementById('recommendation');
            const recommendationTextEl = document.getElementById('recommendation-text');
            const confidenceBarEl = document.getElementById('confidence-bar');
            const confidenceValueEl = document.getElementById('confidence-value');
            const paceValueEl = document.getElementById('pace-value');
            const timeLeftEl = document.getElementById('time-left');
            const leagueTypeEl = document.getElementById('league-type');
            const methodUsedEl = document.getElementById('method-used');
            const historyListEl = document.getElementById('history-list');
            
            // –≠–ª–µ–º–µ–Ω—Ç—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤
            const confidenceIntervalEl = document.getElementById('confidence-interval');
            const intervalValueEl = document.getElementById('interval-value');
            const simulationResultsEl = document.getElementById('simulation-results');
            const simMeanEl = document.getElementById('sim-mean');
            const simMedianEl = document.getElementById('sim-median');
            const simStdEl = document.getElementById('sim-std');
            const simCountEl = document.getElementById('sim-count');
            
            // –≠–ª–µ–º–µ–Ω—Ç—ã –∫–∞—Å—Ç–æ–º–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
            const customKeyboard = document.getElementById('custom-keyboard');
            const keyboardClose = document.getElementById('keyboard-close');
            const keyboardButtons = document.querySelectorAll('.keyboard-btn');
            
            // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
            let currentLeague = 'nba';
            let currentBetType = 'over';
            let currentMethod = 'poisson';
            let calculationHistory = [];
            let mlData = {
                enabled: true,
                accuracy: 0,
                totalPredictions: 0,
                correctPredictions: 0,
                adjustmentFactor: 1.0,
                leagueAccuracy: {},
                recentPerformance: [],
                trainedWithRealData: false
            };
            let currentTheme = 'light';
            let lastPrediction = null;
            let activeInput = null;
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
            initializeApp();
            
            function initializeApp() {
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –ª–∏–≥
                leagueOptions.forEach(option => {
                    option.addEventListener('click', function() {
                        leagueOptions.forEach(opt => opt.classList.remove('active'));
                        this.classList.add('active');
                        currentLeague = this.getAttribute('data-league');
                        updateLeagueInfo();
                        autoCalculate();
                    });
                });
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –º–µ—Ç–æ–¥–æ–≤ —Ä–∞—Å—á–µ—Ç–∞
                methodOptions.forEach(option => {
                    option.addEventListener('click', function() {
                        methodOptions.forEach(opt => opt.classList.remove('active'));
                        this.classList.add('active');
                        currentMethod = this.getAttribute('data-method');
                        autoCalculate();
                    });
                });
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ç–∏–ø–∞ —Å—Ç–∞–≤–∫–∏
                betOverBtn.addEventListener('click', function() {
                    betOverBtn.classList.add('active');
                    betUnderBtn.classList.remove('active');
                    currentBetType = 'over';
                    autoCalculate();
                });
                
                betUnderBtn.addEventListener('click', function() {
                    betUnderBtn.classList.add('active');
                    betOverBtn.classList.remove('active');
                    currentBetType = 'under';
                    autoCalculate();
                });
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
                const inputFields = [score1Input, score2Input, minutesInput, secondsInput, lineTotalInput, realScore1Input, realScore2Input];
                inputFields.forEach(field => {
                    field.addEventListener('focus', showCustomKeyboard);
                    field.addEventListener('click', showCustomKeyboard);
                });
                
                // –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
                calculateBtn.addEventListener('click', performCalculation);
                clearBtn.addEventListener('click', clearForm);
                mlTrainBtn.addEventListener('click', trainMLModel);
                saveRealScoreBtn.addEventListener('click', saveRealScore);
                
                // ML –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å
                mlToggle.addEventListener('change', function() {
                    mlData.enabled = this.checked;
                    updateMLStatus();
                    autoCalculate();
                    saveMLData();
                });
                
                // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
                themeToggle.addEventListener('click', toggleTheme);
                bookmakerToggle.addEventListener('click', toggleBookmakerTheme);
                
                // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
                infoBtn.addEventListener('click', openInstructionModal);
                modalClose.addEventListener('click', closeInstructionModal);
                instructionModal.addEventListener('click', function(e) {
                    if (e.target === instructionModal) {
                        closeInstructionModal();
                    }
                });
                
                // –ö–∞—Å—Ç–æ–º–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
                keyboardClose.addEventListener('click', hideCustomKeyboard);
                keyboardButtons.forEach(button => {
                    button.addEventListener('click', handleKeyboardInput);
                });
                
                // –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∏ ML –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage
                loadHistory();
                loadMLData();
                loadTheme();
                
                // –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç
                autoCalculate();
            }
            
            function showCustomKeyboard(e) {
                activeInput = e.target;
                customKeyboard.classList.add('active');
                
                // –°–∫—Ä—ã–≤–∞–µ–º —Ç–æ—á–∫—É –¥–ª—è —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π
                const decimalButton = customKeyboard.querySelector('[data-value="."]');
                if (activeInput === lineTotalInput) {
                    decimalButton.style.display = 'flex';
                } else {
                    decimalButton.style.display = 'none';
                }
            }
            
            function hideCustomKeyboard() {
                customKeyboard.classList.remove('active');
                activeInput = null;
            }
            
            function handleKeyboardInput(e) {
                if (!activeInput) return;
                
                const value = e.currentTarget.getAttribute('data-value');
                const action = e.currentTarget.getAttribute('data-action');
                
                if (value) {
                    // –î–æ–±–∞–≤–ª—è–µ–º —Ü–∏—Ñ—Ä—É –∏–ª–∏ —Ç–æ—á–∫—É
                    if (activeInput.value === '0' && value !== '.') {
                        activeInput.value = value;
                    } else {
                        activeInput.value += value;
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –¥–ª—è —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π
                    if (activeInput !== lineTotalInput) {
                        activeInput.value = activeInput.value.replace('.', '');
                    }
                } else if (action) {
                    switch(action) {
                        case 'backspace':
                            // –£–¥–∞–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–∏–º–≤–æ–ª
                            activeInput.value = activeInput.value.slice(0, -1);
                            break;
                        case 'clear':
                            // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ
                            activeInput.value = '';
                            break;
                        case 'delete':
                            // –£–¥–∞–ª—è–µ–º –≤—Å–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
                            activeInput.value = '';
                            break;
                        case 'done':
                            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
                            hideCustomKeyboard();
                            break;
                    }
                }
                
                // –í—ã–∑—ã–≤–∞–µ–º —Å–æ–±—ã—Ç–∏–µ input –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–∞—Å—á–µ—Ç–æ–≤
                activeInput.dispatchEvent(new Event('input', { bubbles: true }));
            }
            
            function toggleTheme() {
                if (currentTheme === 'light') {
                    currentTheme = 'dark';
                    document.body.classList.add('dark-theme');
                    document.body.classList.remove('bookmaker-theme');
                    themeIcon.classList.remove('fa-moon');
                    themeIcon.classList.add('fa-sun');
                } else {
                    currentTheme = 'light';
                    document.body.classList.remove('dark-theme');
                    document.body.classList.remove('bookmaker-theme');
                    themeIcon.classList.remove('fa-sun');
                    themeIcon.classList.add('fa-moon');
                }
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Ç–µ–º—ã
                localStorage.setItem('betAnalyzerTheme', currentTheme);
            }
            
            function toggleBookmakerTheme() {
                if (currentTheme === 'bookmaker') {
                    currentTheme = 'light';
                    document.body.classList.remove('bookmaker-theme');
                    bookmakerIcon.style.color = 'white';
                } else {
                    currentTheme = 'bookmaker';
                    document.body.classList.remove('dark-theme');
                    document.body.classList.add('bookmaker-theme');
                    bookmakerIcon.style.color = '#ffcc00';
                }
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Ç–µ–º—ã
                localStorage.setItem('betAnalyzerTheme', currentTheme);
            }
            
            function loadTheme() {
                const savedTheme = localStorage.getItem('betAnalyzerTheme');
                if (savedTheme) {
                    currentTheme = savedTheme;
                    
                    if (currentTheme === 'dark') {
                        document.body.classList.add('dark-theme');
                        themeIcon.classList.remove('fa-moon');
                        themeIcon.classList.add('fa-sun');
                    } else if (currentTheme === 'bookmaker') {
                        document.body.classList.add('bookmaker-theme');
                        bookmakerIcon.style.color = '#ffcc00';
                    }
                }
            }
            
            function openInstructionModal() {
                instructionModal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
            
            function closeInstructionModal() {
                instructionModal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
            
            function updateLeagueInfo() {
                let leagueName = '';
                
                switch(currentLeague) {
                    case 'nba':
                        leagueName = 'NBA';
                        break;
                    case 'fib–∞':
                        leagueName = '–§–ò–ë–ê';
                        break;
                    case 'cyber':
                        leagueName = '–ö–∏–±–µ—Ä';
                        break;
                }
                
                leagueTypeEl.textContent = leagueName;
            }
            
            function updateMLStatus() {
                if (mlData.enabled) {
                    mlStatus.classList.add('active');
                    mlTrainBtn.style.display = 'block';
                } else {
                    mlStatus.classList.remove('active');
                    mlTrainBtn.style.display = 'none';
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É ML
                mlAccuracy.textContent = `${(mlData.accuracy * 100).toFixed(2)}%`;
                mlAdjustment.textContent = `${((mlData.adjustmentFactor - 1) * 100).toFixed(2)}%`;
                mlDataCount.textContent = mlData.totalPredictions;
                mlImprovement.textContent = `+${(mlData.accuracy * 15).toFixed(2)}%`;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –æ–±—É—á–µ–Ω–∏—è
                if (mlData.trainedWithRealData) {
                    trainingStatusEl.textContent = "–û–±—É—á–µ–Ω–∞";
                    trainingStatusEl.className = "feedback-value positive";
                } else {
                    trainingStatusEl.textContent = "–ù–µ –æ–±—É—á–µ–Ω–∞";
                    trainingStatusEl.className = "feedback-value negative";
                }
            }
            
            function autoCalculate() {
                // –ê–≤—Ç–æ—Ä–∞—Å—á–µ—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
                const hasData = score1Input.value && score2Input.value && minutesInput.value && secondsInput.value;
                
                if (hasData) {
                    performCalculation(false);
                }
            }
            
            function performCalculation(saveToHistory = true) {
                // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–æ—Ä–º—ã
                const score1 = parseInt(score1Input.value) || 0;
                const score2 = parseInt(score2Input.value) || 0;
                const period = parseInt(periodSelect.value);
                const minutes = parseInt(minutesInput.value) || 0;
                const seconds = parseInt(secondsInput.value) || 0;
                const lineTotal = parseFloat(lineTotalInput.value) || 0;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
                if (score1 === 0 && score2 === 0) {
                    showResult('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—É—â–∏–π —Å—á–µ—Ç –º–∞—Ç—á–∞', 'neutral', 0);
                    return;
                }
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—ã–π —Ç–æ—Ç–∞–ª –∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å
                const predictionResult = calculatePrediction(score1, score2, period, minutes, seconds, lineTotal);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø—Ä–æ–≥–Ω–æ–∑ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è ML
                lastPrediction = {
                    score1: score1,
                    score2: score2,
                    period: period,
                    minutes: minutes,
                    seconds: seconds,
                    lineTotal: lineTotal,
                    predictedTotal: predictionResult.predictedTotal,
                    probability: predictionResult.probability,
                    betType: currentBetType,
                    timestamp: new Date()
                };
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
                updateResults(predictionResult, lineTotal);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
                if (saveToHistory && lineTotal > 0) {
                    saveToHistoryList(score1, score2, predictionResult, lineTotal, currentBetType);
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –¥–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞
                updateCalculationDetails(score1, score2, period, minutes, seconds, predictionResult);
            }
            
            function calculatePrediction(score1, score2, period, minutes, seconds, lineTotal) {
                const totalScore = score1 + score2;
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ª–∏–≥–∏
                let minutesPerPeriod, totalPeriods, basePace;
                
                switch(currentLeague) {
                    case 'nba':
                        minutesPerPeriod = 12;
                        totalPeriods = 4;
                        basePace = 2.1; // –æ—á–∫–æ–≤ –≤ –º–∏–Ω—É—Ç—É –Ω–∞ –∫–æ–º–∞–Ω–¥—É
                        break;
                    case 'fib–∞':
                        minutesPerPeriod = 10;
                        totalPeriods = 4;
                        basePace = 1.8;
                        break;
                    case 'cyber':
                        minutesPerPeriod = 5;
                        totalPeriods = 4;
                        basePace = 2.4;
                        break;
                }
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–æ—à–µ–¥—à–µ–µ –∏ –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è
                const elapsedMinutesInPeriod = minutes + seconds / 60;
                const totalElapsedMinutes = (period - 1) * minutesPerPeriod + elapsedMinutesInPeriod;
                const remainingMinutesInPeriod = minutesPerPeriod - elapsedMinutesInPeriod;
                const fullPeriodsRemaining = totalPeriods - period;
                const totalRemainingMinutes = remainingMinutesInPeriod + (fullPeriodsRemaining * minutesPerPeriod);
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π —Ç–µ–º–ø
                const currentPace = totalElapsedMinutes > 0 ? totalScore / totalElapsedMinutes : basePace * 2;
                
                let predictedTotal, probability, confidenceInterval, simulationStats;
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ —Ä–∞—Å—á–µ—Ç–∞
                switch(currentMethod) {
                    case 'poisson':
                        const poissonResult = calculatePoissonPrediction(totalScore, totalElapsedMinutes, totalRemainingMinutes, lineTotal);
                        predictedTotal = poissonResult.predictedTotal;
                        probability = poissonResult.probability;
                        confidenceInterval = poissonResult.confidenceInterval;
                        break;
                        
                    case 'adjusted':
                        const adjustedResult = calculateAdjustedRatings(score1, score2, totalElapsedMinutes, totalRemainingMinutes, lineTotal);
                        predictedTotal = adjustedResult.predictedTotal;
                        probability = adjustedResult.probability;
                        confidenceInterval = adjustedResult.confidenceInterval;
                        break;
                        
                    case 'montecarlo':
                        const monteCarloResult = calculateMonteCarlo(totalScore, totalElapsedMinutes, totalRemainingMinutes, lineTotal, currentPace);
                        predictedTotal = monteCarloResult.predictedTotal;
                        probability = monteCarloResult.probability;
                        confidenceInterval = monteCarloResult.confidenceInterval;
                        simulationStats = monteCarloResult.simulationStats;
                        break;
                }
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º ML-–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫—É –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ
                let mlBoost = 0;
                if (mlData.enabled && mlData.totalPredictions > 5) {
                    const mlCorrectionResult = applyMLCorrection(probability, currentLeague);
                    probability = mlCorrectionResult.adjustedProbability;
                    mlBoost = mlCorrectionResult.mlBoost;
                }
                
                return {
                    predictedTotal: predictedTotal,
                    probability: probability,
                    confidenceInterval: confidenceInterval,
                    simulationStats: simulationStats,
                    mlBoost: mlBoost,
                    currentPace: currentPace,
                    totalRemainingMinutes: totalRemainingMinutes
                };
            }
            
            function calculatePoissonPrediction(totalScore, elapsedMinutes, remainingMinutes, lineTotal) {
                // Poisson regression –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ—Ç–∞–ª–∞
                const lambda = totalScore / elapsedMinutes; // –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å (–æ—á–∫–æ–≤ –≤ –º–∏–Ω—É—Ç—É)
                
                // –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º –æ—á–∫–∏ –Ω–∞ –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è
                const predictedAdditional = lambda * remainingMinutes;
                const predictedTotal = totalScore + predictedAdditional;
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ —Å—Ç–∞–≤–∫–∏
                let probability;
                if (currentBetType === 'over') {
                    // P(X > lineTotal) = 1 - P(X <= lineTotal)
                    probability = 1 - poissonCDF(lineTotal - totalScore, predictedAdditional);
                } else {
                    // P(X < lineTotal) = P(X <= lineTotal - 1)
                    probability = poissonCDF(lineTotal - totalScore - 1, predictedAdditional);
                }
                
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Ç 0 –¥–æ 1
                probability = Math.max(0, Math.min(1, probability));
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª (95%)
                const stdDev = Math.sqrt(predictedAdditional);
                const confidenceInterval = {
                    lower: Math.max(totalScore, predictedTotal - 1.96 * stdDev),
                    upper: predictedTotal + 1.96 * stdDev
                };
                
                return {
                    predictedTotal: predictedTotal,
                    probability: probability,
                    confidenceInterval: confidenceInterval
                };
            }
            
            function calculateAdjustedRatings(score1, score2, elapsedMinutes, remainingMinutes, lineTotal) {
                // Adjusted offensive/defensive ratings
                const totalScore = score1 + score2;
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ä–µ–π—Ç–∏–Ω–≥–∏ –∫–æ–º–∞–Ω–¥
                const offRating1 = score1 / elapsedMinutes;
                const defRating1 = score2 / elapsedMinutes;
                const offRating2 = score2 / elapsedMinutes;
                const defRating2 = score1 / elapsedMinutes;
                
                // Net ratings
                const netRating1 = offRating1 - defRating2;
                const netRating2 = offRating2 - defRating1;
                
                // –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º –æ—á–∫–∏ –Ω–∞ –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è —Å —É—á–µ—Ç–æ–º —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
                const predictedAdditional1 = (offRating1 - defRating2 * 0.5) * remainingMinutes;
                const predictedAdditional2 = (offRating2 - defRating1 * 0.5) * remainingMinutes;
                const predictedAdditional = predictedAdditional1 + predictedAdditional2;
                
                const predictedTotal = totalScore + predictedAdditional;
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å
                let probability;
                const adjustmentFactor = 1 + (Math.abs(netRating1 - netRating2) * 0.1);
                
                if (currentBetType === 'over') {
                    probability = 0.5 + (predictedTotal - lineTotal) / 50 * adjustmentFactor;
                } else {
                    probability = 0.5 + (lineTotal - predictedTotal) / 50 * adjustmentFactor;
                }
                
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å
                probability = Math.max(0.1, Math.min(0.9, probability));
                
                // –î–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª
                const confidenceInterval = {
                    lower: predictedTotal * 0.9,
                    upper: predictedTotal * 1.1
                };
                
                return {
                    predictedTotal: predictedTotal,
                    probability: probability,
                    confidenceInterval: confidenceInterval
                };
            }
            
            function calculateMonteCarlo(totalScore, elapsedMinutes, remainingMinutes, lineTotal, currentPace) {
                // Monte-Carlo —Å–∏–º—É–ª—è—Ü–∏—è
                const simulations = 1000;
                let results = [];
                let overCount = 0;
                
                for (let i = 0; i < simulations; i++) {
                    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–π —Ç–æ—Ç–∞–ª –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–µ–≥–æ —Ç–µ–º–ø–∞ –∏ –¥–∏—Å–ø–µ—Ä—Å–∏–∏
                    const variance = currentPace * 0.3; // 30% –¥–∏—Å–ø–µ—Ä—Å–∏—è
                    const randomPace = currentPace + (Math.random() - 0.5) * variance * 2;
                    const simulatedAdditional = randomPace * remainingMinutes * (0.9 + Math.random() * 0.2);
                    const simulatedTotal = totalScore + simulatedAdditional;
                    
                    results.push(simulatedTotal);
                    
                    if ((currentBetType === 'over' && simulatedTotal > lineTotal) ||
                        (currentBetType === 'under' && simulatedTotal < lineTotal)) {
                        overCount++;
                    }
                }
                
                // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏–º—É–ª—è—Ü–∏–∏
                results.sort((a, b) => a - b);
                const mean = results.reduce((a, b) => a + b, 0) / results.length;
                const median = results[Math.floor(results.length / 2)];
                const std = Math.sqrt(results.reduce((a, b) => a + Math.pow(b - mean, 2), 0) / results.length);
                
                const probability = overCount / simulations;
                
                // –î–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª (95%)
                const confidenceInterval = {
                    lower: results[Math.floor(results.length * 0.025)],
                    upper: results[Math.floor(results.length * 0.975)]
                };
                
                return {
                    predictedTotal: mean,
                    probability: probability,
                    confidenceInterval: confidenceInterval,
                    simulationStats: {
                        mean: mean,
                        median: median,
                        std: std,
                        count: simulations
                    }
                };
            }
            
            function poissonCDF(k, lambda) {
                // Cumulative distribution function –¥–ª—è Poisson
                let sum = 0;
                for (let i = 0; i <= k; i++) {
                    sum += Math.pow(lambda, i) * Math.exp(-lambda) / factorial(i);
                }
                return sum;
            }
            
            function factorial(n) {
                if (n === 0 || n === 1) return 1;
                let result = 1;
                for (let i = 2; i <= n; i++) {
                    result *= i;
                }
                return result;
            }
            
            function applyMLCorrection(probability, league) {
                // ML-–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏
                let mlBoost = mlData.accuracy * 0.2; // –î–æ 20% –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏
                
                // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ª–∏–≥–∏
                if (mlData.leagueAccuracy[league]) {
                    mlBoost *= mlData.leagueAccuracy[league].factor || 1.0;
                }
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º –∫–æ—Ä—Ä–µ–∫—Ü–∏—é
                let adjustedProbability = probability;
                if (probability > 0.5) {
                    adjustedProbability = Math.min(0.95, probability + mlBoost);
                } else {
                    adjustedProbability = Math.max(0.05, probability - mlBoost);
                }
                
                return {
                    adjustedProbability: adjustedProbability,
                    mlBoost: mlBoost * 100
                };
            }
            
            function updateResults(predictionResult, lineTotal) {
                // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—ã–π —Ç–æ—Ç–∞–ª
                predictedTotalEl.textContent = predictionResult.predictedTotal.toFixed(1);
                predictedTotalEl.classList.add('success-animation');
                setTimeout(() => predictedTotalEl.classList.remove('success-animation'), 500);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å
                const probabilityPercent = (predictionResult.probability * 100).toFixed(1);
                probabilityValueEl.textContent = `${probabilityPercent}%`;
                
                // –¶–≤–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏
                if (predictionResult.probability > 0.6) {
                    probabilityValueEl.className = 'result-value positive';
                } else if (predictionResult.probability > 0.4) {
                    probabilityValueEl.className = 'result-value neutral';
                } else {
                    probabilityValueEl.className = 'result-value negative';
                }
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª
                if (predictionResult.confidenceInterval) {
                    confidenceIntervalEl.style.display = 'block';
                    intervalValueEl.textContent = `${predictionResult.confidenceInterval.lower.toFixed(1)} - ${predictionResult.confidenceInterval.upper.toFixed(1)}`;
                }
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–∏–º—É–ª—è—Ü–∏–∏ –¥–ª—è Monte-Carlo
                if (currentMethod === 'montecarlo' && predictionResult.simulationStats) {
                    simulationResultsEl.style.display = 'block';
                    simMeanEl.textContent = predictionResult.simulationStats.mean.toFixed(1);
                    simMedianEl.textContent = predictionResult.simulationStats.median.toFixed(1);
                    simStdEl.textContent = predictionResult.simulationStats.std.toFixed(1);
                    simCountEl.textContent = predictionResult.simulationStats.count;
                } else {
                    simulationResultsEl.style.display = 'none';
                }
                
                // –§–æ—Ä–º–∏—Ä—É–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏
                let recommendation, type, confidence;
                
                if (predictionResult.probability > 0.7) {
                    recommendation = currentBetType === 'over' ? "–°–¢–†–û–ù–ì –¢–ë ‚¨ÜÔ∏è" : "–°–¢–†–û–ù–ì –¢–ú ‚¨áÔ∏è";
                    type = "strong-buy";
                    confidence = (predictionResult.probability - 0.5) * 2 * 100;
                } else if (predictionResult.probability > 0.55) {
                    recommendation = currentBetType === 'over' ? "–¢–ë ‚úÖ" : "–¢–ú ‚úÖ";
                    type = "buy";
                    confidence = (predictionResult.probability - 0.5) * 2 * 100;
                } else {
                    recommendation = currentBetType === 'over' ? "–ò–ó–ë–ï–ì–ê–¢–¨ –¢–ë ‚ùå" : "–ò–ó–ë–ï–ì–ê–¢–¨ –¢–ú ‚ùå";
                    type = "avoid";
                    confidence = 0;
                }
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º ML-–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫—É –∫ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
                if (mlData.enabled && mlData.totalPredictions > 5) {
                    confidence = Math.min(100, confidence + predictionResult.mlBoost);
                    mlBadge.style.display = 'block';
                    mlCorrection.style.display = 'flex';
                    mlCorrectionValue.textContent = `+${predictionResult.mlBoost.toFixed(2)}%`;
                    recommendationEl.classList.add('ml-enhanced');
                    recommendationEl.classList.add('ml-glow');
                } else {
                    mlBadge.style.display = 'none';
                    mlCorrection.style.display = 'none';
                    recommendationEl.classList.remove('ml-enhanced');
                    recommendationEl.classList.remove('ml-glow');
                }
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é
                showResult(recommendation, type, confidence);
            }
            
            function saveRealScore() {
                const realScore1 = parseInt(realScore1Input.value) || 0;
                const realScore2 = parseInt(realScore2Input.value) || 0;
                
                if (realScore1 === 0 && realScore2 === 0) {
                    alert('–í–≤–µ–¥–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π –∏—Ç–æ–≥–æ–≤—ã–π —Å—á–µ—Ç –º–∞—Ç—á–∞');
                    return;
                }
                
                if (!lastPrediction) {
                    alert('–°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Ä–∞—Å—á–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑–∞');
                    return;
                }
                
                const realTotal = realScore1 + realScore2;
                const predictionError = Math.abs(lastPrediction.predictedTotal - realTotal);
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –±—ã–ª–∞ –ª–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π
                let recommendationCorrect = false;
                if ((lastPrediction.betType === 'over' && realTotal > lastPrediction.lineTotal) ||
                    (lastPrediction.betType === 'under' && realTotal < lastPrediction.lineTotal)) {
                    recommendationCorrect = true;
                }
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–æ—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≥–Ω–æ–∑–∞
                const predictionAccuracy = Math.max(0, 100 - (predictionError / realTotal * 100));
                
                // –û–±–Ω–æ–≤–ª—è–µ–º ML –¥–∞–Ω–Ω—ã–µ
                mlData.totalPredictions++;
                if (recommendationCorrect) {
                    mlData.correctPredictions++;
                }
                mlData.accuracy = mlData.correctPredictions / mlData.totalPredictions;
                mlData.adjustmentFactor = 1.0 + (mlData.accuracy * 0.3);
                mlData.trainedWithRealData = true;
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
                mlData.recentPerformance.push(recommendationCorrect ? 1 : 0);
                if (mlData.recentPerformance.length > 5) {
                    mlData.recentPerformance.shift();
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è —Ç–µ–∫—É—â–µ–π –ª–∏–≥–∏
                if (!mlData.leagueAccuracy[currentLeague]) {
                    mlData.leagueAccuracy[currentLeague] = { accuracy: 0, factor: 1.0 };
                }
                mlData.leagueAccuracy[currentLeague].accuracy = mlData.accuracy;
                mlData.leagueAccuracy[currentLeague].factor = 0.9 + (mlData.accuracy * 0.2);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å
                updateMLFeedback(predictionAccuracy, recommendationCorrect, predictionError);
                
                saveMLData();
                updateMLStatus();
                
                // –û—á–∏—â–∞–µ–º –ø–æ–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å—á–µ—Ç–∞
                realScore1Input.value = '';
                realScore2Input.value = '';
                
                alert(`–†–µ–∞–ª—å–Ω—ã–π —Å—á–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω!\n–¢–æ—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≥–Ω–æ–∑–∞: ${predictionAccuracy.toFixed(2)}%\n–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: ${recommendationCorrect ? '–ü–†–ê–í–ò–õ–¨–ù–ê–Ø' : '–ù–ï–ü–†–ê–í–ò–õ–¨–ù–ê–Ø'}`);
            }
            
            function updateMLFeedback(predictionAccuracy, recommendationCorrect, predictionError) {
                predictionAccuracyEl.textContent = `${predictionAccuracy.toFixed(2)}%`;
                if (predictionAccuracy >= 90) {
                    predictionAccuracyEl.className = "feedback-value positive";
                } else if (predictionAccuracy >= 80) {
                    predictionAccuracyEl.className = "feedback-value";
                } else {
                    predictionAccuracyEl.className = "feedback-value negative";
                }
                
                recommendationAccuracyEl.textContent = recommendationCorrect ? "–ü–†–ê–í–ò–õ–¨–ù–ê–Ø" : "–ù–ï–ü–†–ê–í–ò–õ–¨–ù–ê–Ø";
                recommendationAccuracyEl.className = recommendationCorrect ? "feedback-value positive" : "feedback-value negative";
                
                predictionErrorEl.textContent = `${predictionError.toFixed(2)} –æ—á–∫–æ–≤`;
                if (predictionError <= 5) {
                    predictionErrorEl.className = "feedback-value positive";
                } else if (predictionError <= 10) {
                    predictionErrorEl.className = "feedback-value";
                } else {
                    predictionErrorEl.className = "feedback-value negative";
                }
            }
            
            function trainMLModel() {
                if (calculationHistory.length < 3) {
                    alert('–ù—É–∂–Ω–æ –∫–∞–∫ –º–∏–Ω–∏–º—É–º 3 —Ä–∞—Å—á–µ—Ç–∞ –≤ –∏—Å—Ç–æ—Ä–∏–∏ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è ML –º–æ–¥–µ–ª–∏');
                    return;
                }
                
                if (!mlData.trainedWithRealData) {
                    alert('–î–ª—è –æ–±—É—á–µ–Ω–∏—è ML –º–æ–¥–µ–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–∞—Ç—á–µ–π');
                    return;
                }
                
                // –ò–º–∏—Ç–∞—Ü–∏—è –æ–±—É—á–µ–Ω–∏—è ML –º–æ–¥–µ–ª–∏
                const trainingData = calculationHistory.slice(0, 10); // –ë–µ—Ä–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –∑–∞–ø–∏—Å–µ–π
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º "—Ç–æ—á–Ω–æ—Å—Ç—å" –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π
                let totalError = 0;
                let correctPredictions = 0;
                
                trainingData.forEach(item => {
                    const error = Math.abs(item.predictedTotal - item.lineTotal);
                    totalError += error;
                    
                    // –°—á–∏—Ç–∞–µ–º –ø—Ä–æ–≥–Ω–æ–∑ "–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º" –µ—Å–ª–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –±—ã–ª–∞ > 50% –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –±—ã–ª–∞ –≤–µ—Ä–Ω–æ–π
                    if (item.probability > 0.5 && item.recommendationCorrect) {
                        correctPredictions++;
                    }
                });
                
                const avgError = totalError / trainingData.length;
                const accuracy = correctPredictions / trainingData.length;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º ML –¥–∞–Ω–Ω—ã–µ
                mlData.accuracy = accuracy;
                mlData.totalPredictions = trainingData.length;
                mlData.correctPredictions = correctPredictions;
                mlData.adjustmentFactor = 1.0 + (accuracy * 0.3);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
                mlData.recentPerformance.push(accuracy);
                if (mlData.recentPerformance.length > 5) {
                    mlData.recentPerformance.shift();
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è —Ç–µ–∫—É—â–µ–π –ª–∏–≥–∏
                if (!mlData.leagueAccuracy[currentLeague]) {
                    mlData.leagueAccuracy[currentLeague] = { accuracy: 0, factor: 1.0 };
                }
                mlData.leagueAccuracy[currentLeague].accuracy = accuracy;
                mlData.leagueAccuracy[currentLeague].factor = 0.9 + (accuracy * 0.2);
                
                saveMLData();
                updateMLStatus();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—É—á–µ–Ω–∏—è
                alert(`ML –º–æ–¥–µ–ª—å –æ–±—É—á–µ–Ω–∞!\n–¢–æ—á–Ω–æ—Å—Ç—å: ${(accuracy * 100).toFixed(2)}%\n–°—Ä–µ–¥–Ω—è—è –æ—à–∏–±–∫–∞: ${avgError.toFixed(2)} –æ—á–∫–æ–≤\n–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞: +${((mlData.adjustmentFactor - 1) * 100).toFixed(2)}%`);
                
                // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–≥–Ω–æ–∑ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–π ML –º–æ–¥–µ–ª—å—é
                autoCalculate();
            }
            
            function showResult(recommendation, type, confidence) {
                recommendationTextEl.textContent = recommendation;
                recommendationEl.className = `recommendation ${type}`;
                confidenceBarEl.style.width = `${confidence}%`;
                confidenceValueEl.textContent = `${confidence.toFixed(2)}%`;
                
                // –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
                recommendationEl.classList.add('success-animation');
                setTimeout(() => recommendationEl.classList.remove('success-animation'), 500);
            }
            
            function updateCalculationDetails(score1, score2, period, minutes, seconds, predictionResult) {
                const totalScore = score1 + score2;
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ª–∏–≥–∏
                let minutesPerPeriod;
                switch(currentLeague) {
                    case 'nba': minutesPerPeriod = 12; break;
                    case 'fib–∞': minutesPerPeriod = 10; break;
                    case 'cyber': minutesPerPeriod = 5; break;
                }
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è –≤ –º–∏–Ω—É—Ç–∞—Ö
                const elapsedMinutesInPeriod = minutes + seconds / 60;
                const totalElapsedMinutes = (period - 1) * minutesPerPeriod + elapsedMinutesInPeriod;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –¥–µ—Ç–∞–ª–∏
                paceValueEl.textContent = `${predictionResult.currentPace.toFixed(2)} –æ—á/–º–∏–Ω`;
                timeLeftEl.textContent = `${predictionResult.totalRemainingMinutes.toFixed(2)} –º–∏–Ω`;
                
                // –ú–µ—Ç–æ–¥ —Ä–∞—Å—á–µ—Ç–∞
                let methodName = '';
                switch(currentMethod) {
                    case 'poisson': methodName = 'Poisson Regression'; break;
                    case 'adjusted': methodName = 'Adjusted Ratings'; break;
                    case 'montecarlo': methodName = 'Monte-Carlo Simulation'; break;
                }
                methodUsedEl.textContent = methodName;
            }
            
            function saveToHistoryList(score1, score2, predictionResult, lineTotal, betType) {
                const historyItem = {
                    id: Date.now(),
                    score: `${score1}:${score2}`,
                    predictedTotal: predictionResult.predictedTotal,
                    lineTotal: lineTotal,
                    betType: betType,
                    probability: predictionResult.probability,
                    recommendation: predictionResult.probability > 0.5 ? (betType === 'over' ? '–¢–ë' : '–¢–ú') : '–ò–ó–ë–ï–ì–ê–¢–¨',
                    confidence: (predictionResult.probability - 0.5) * 2 * 100,
                    type: predictionResult.probability > 0.7 ? 'strong-buy' : (predictionResult.probability > 0.55 ? 'buy' : 'avoid'),
                    mlBoost: predictionResult.mlBoost || 0,
                    mlEnhanced: mlData.enabled && mlData.totalPredictions > 5,
                    timestamp: new Date().toLocaleTimeString(),
                    method: currentMethod
                };
                
                calculationHistory.unshift(historyItem);
                if (calculationHistory.length > 10) {
                    calculationHistory = calculationHistory.slice(0, 10);
                }
                
                saveHistory();
                renderHistory();
            }
            
            function renderHistory() {
                historyListEl.innerHTML = '';
                
                if (calculationHistory.length === 0) {
                    historyListEl.innerHTML = '<div style="text-align: center; padding: 20px; color: #666;">–ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—á–µ—Ç–æ–≤ –ø—É—Å—Ç–∞</div>';
                    return;
                }
                
                calculationHistory.forEach(item => {
                    const historyItemEl = document.createElement('div');
                    historyItemEl.className = 'history-item';
                    
                    const confidenceClass = item.mlEnhanced ? 'ml-enhanced' : 
                                          item.confidence > 20 ? 'positive' : 
                                          item.confidence > 10 ? 'neutral' : 'negative';
                    
                    historyItemEl.innerHTML = `
                        <div style="flex: 1;">
                            <div class="history-prediction">${item.score} | ${item.recommendation} ${item.mlEnhanced ? 'ü§ñ' : ''}</div>
                            <div class="history-details">${item.method} | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: ${(item.probability * 100).toFixed(1)}%</div>
                        </div>
                        <div class="history-confidence ${confidenceClass}">${item.confidence.toFixed(2)}%</div>
                    `;
                    
                    historyListEl.appendChild(historyItemEl);
                });
            }
            
            function saveHistory() {
                localStorage.setItem('betAnalyzerHistory', JSON.stringify(calculationHistory));
            }
            
            function loadHistory() {
                const savedHistory = localStorage.getItem('betAnalyzerHistory');
                if (savedHistory) {
                    calculationHistory = JSON.parse(savedHistory);
                    renderHistory();
                }
            }
            
            function saveMLData() {
                localStorage.setItem('betAnalyzerMLData', JSON.stringify(mlData));
            }
            
            function loadMLData() {
                const savedMLData = localStorage.getItem('betAnalyzerMLData');
                if (savedMLData) {
                    mlData = JSON.parse(savedMLData);
                    mlToggle.checked = mlData.enabled;
                    updateMLStatus();
                }
            }
            
            function clearForm() {
                score1Input.value = '';
                score2Input.value = '';
                minutesInput.value = '';
                secondsInput.value = '';
                lineTotalInput.value = '';
                realScore1Input.value = '';
                realScore2Input.value = '';
                
                predictedTotalEl.textContent = '--';
                probabilityValueEl.textContent = '--%';
                probabilityValueEl.className = 'result-value neutral';
                
                showResult('–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞', 'neutral', 0);
                
                paceValueEl.textContent = '-- –æ—á/–º–∏–Ω';
                timeLeftEl.textContent = '-- –º–∏–Ω';
                methodUsedEl.textContent = '--';
                
                mlBadge.style.display = 'none';
                mlCorrection.style.display = 'none';
                confidenceIntervalEl.style.display = 'none';
                simulationResultsEl.style.display = 'none';
                recommendationEl.classList.remove('ml-enhanced');
                recommendationEl.classList.remove('ml-glow');
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å ML
                predictionAccuracyEl.textContent = '--';
                predictionAccuracyEl.className = 'feedback-value neutral';
                recommendationAccuracyEl.textContent = '--';
                recommendationAccuracyEl.className = 'feedback-value neutral';
                predictionErrorEl.textContent = '--';
                predictionErrorEl.className = 'feedback-value neutral';
                
                // –ó–∞–∫—Ä—ã–≤–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–∞
                hideCustomKeyboard();
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ª–∏–≥–µ
            updateLeagueInfo();
        });
    </script>
</body>
</html>
