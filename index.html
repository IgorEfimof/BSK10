<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/icon211.png">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="BSK10">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å—Ç–∞–≤–æ–∫ PRO</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        :root {
            --primary: #2c3e50;
            --secondary: #e74c3c;
            --success: #27ae60;
            --danger: #e74c3c;
            --warning: #f39c12;
            --info: #3498db;
            --light: #f8f9fa;
            --dark: #2c3e50;
            --background: linear-gradient(135deg, #1a2a6c, #2c3e50);
            --card-bg: rgba(255, 255, 255, 0.98);
            --text-color: #333;
            --border-color: #ddd;
        }
        
        .dark-theme {
            --primary: #3498db;
            --secondary: #e74c3c;
            --success: #2ecc71;
            --danger: #e74c3c;
            --warning: #f39c12;
            --info: #3498db;
            --light: #34495e;
            --dark: #ecf0f1;
            --background: linear-gradient(135deg, #2c3e50, #1a1a2e);
            --card-bg: rgba(44, 62, 80, 0.95);
            --text-color: #ecf0f1;
            --border-color: #4a6572;
        }
        
        body {
            background: var(--background);
            color: var(--text-color);
            min-height: 100vh;
            padding: 15px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            -webkit-text-size-adjust: none;
            text-size-adjust: none;
            transition: background 0.5s ease, color 0.5s ease;
        }
        
        .container {
            width: 100%;
            max-width: 500px;
            background: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            transition: all 0.5s ease;
        }
        
        header {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            color: white;
            padding: 18px 20px;
            text-align: center;
            position: relative;
        }
        
        .header-controls {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            gap: 10px;
        }
        
        .theme-toggle, .info-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            font-size: 1.2rem;
        }
        
        .theme-toggle:hover, .info-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(30deg);
        }
        
        h1 {
            font-size: 1.5rem;
            margin-bottom: 5px;
            font-weight: 700;
        }
        
        .subtitle {
            font-size: 0.85rem;
            opacity: 0.9;
        }
        
        .main-content {
            padding: 18px;
        }
        
        .input-section {
            margin-bottom: 20px;
        }
        
        .section-title {
            color: var(--primary);
            margin-bottom: 12px;
            padding-bottom: 6px;
            border-bottom: 2px solid var(--primary);
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 15px;
        }
        
        .input-group {
            margin-bottom: 12px;
        }
        
        .input-label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: var(--primary);
            font-size: 0.9rem;
        }
        
        .input-field {
            width: 100%;
            padding: 12px 14px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
            background: var(--card-bg);
            color: var(--text-color);
            font-size: 16px;
            transition: border-color 0.3s;
            -webkit-appearance: none;
            appearance: none;
        }
        
        .input-field:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        .input-row {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .input-row .input-field {
            flex: 1;
        }
        
        .input-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--primary);
            color: white;
            padding: 0 12px;
            height: 44px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .league-selector {
            margin-bottom: 15px;
            padding: 12px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 10px;
        }
        
        .league-options {
            display: flex;
            gap: 8px;
            margin-top: 8px;
        }
        
        .league-option {
            flex: 1;
            padding: 10px 8px;
            text-align: center;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.85rem;
            font-weight: 500;
            background: var(--card-bg);
            color: var(--text-color);
        }
        
        .league-option.active {
            border-color: var(--primary);
            background: rgba(52, 152, 219, 0.2);
            font-weight: 600;
        }
        
        .bet-type-selector {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .bet-type-btn {
            flex: 1;
            padding: 12px;
            text-align: center;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            background: var(--card-bg);
            color: var(--text-color);
        }
        
        .bet-type-btn.active {
            border-color: var(--primary);
            background: rgba(52, 152, 219, 0.2);
        }
        
        .ml-controls {
            margin-top: 15px;
            padding: 12px;
            background: rgba(155, 89, 182, 0.1);
            border-radius: 10px;
            border-left: 4px solid #9b59b6;
        }
        
        .ml-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .ml-status {
            font-size: 0.85rem;
            color: var(--text-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .ml-status.active {
            color: #9b59b6;
            font-weight: 600;
        }
        
        .ml-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            font-size: 0.8rem;
        }
        
        .ml-stat {
            display: flex;
            justify-content: space-between;
            padding: 4px 0;
        }
        
        .ml-stat-value {
            font-weight: 600;
            color: var(--primary);
        }
        
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #9b59b6;
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        
        .results-section {
            padding: 18px;
            background: var(--light);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-bottom: 18px;
        }
        
        .result-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 15px;
        }
        
        .result-card {
            padding: 12px;
            border-radius: 10px;
            background: var(--card-bg);
            text-align: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .result-title {
            font-size: 0.8rem;
            color: var(--primary);
            margin-bottom: 6px;
            font-weight: 600;
        }
        
        .result-value {
            font-size: 1.2rem;
            font-weight: 700;
        }
        
        .positive {
            color: var(--success);
        }
        
        .negative {
            color: var(--danger);
        }
        
        .neutral {
            color: var(--info);
        }
        
        .ml-enhanced {
            color: #9b59b6;
        }
        
        .recommendation {
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            color: white;
            margin-top: 15px;
        }
        
        .recommendation.strong-buy {
            background: linear-gradient(90deg, var(--success), #2ecc71);
        }
        
        .recommendation.buy {
            background: linear-gradient(90deg, var(--info), #3498db);
        }
        
        .recommendation.avoid {
            background: linear-gradient(90deg, var(--danger), #c0392b);
        }
        
        .recommendation.ml-enhanced {
            background: linear-gradient(90deg, #9b59b6, #8e44ad);
            position: relative;
            overflow: hidden;
        }
        
        .ml-badge {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 255, 255, 0.3);
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        
        .recommendation-title {
            font-size: 1.2rem;
            margin-bottom: 8px;
            font-weight: 700;
        }
        
        .confidence-meter {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 10px;
        }
        
        .confidence-text {
            margin-right: 10px;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .confidence-bar {
            width: 100px;
            height: 8px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .confidence-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
            background: white;
        }
        
        .confidence-value {
            margin-left: 10px;
            font-weight: 700;
            font-size: 1rem;
        }
        
        .details {
            margin-top: 15px;
            padding: 12px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 10px;
        }
        
        .details-title {
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }
        
        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            font-size: 0.85rem;
        }
        
        .detail-label {
            color: var(--text-color);
        }
        
        .detail-value {
            font-weight: 600;
            color: var(--primary);
            text-align: right;
        }
        
        .ml-correction {
            margin-top: 10px;
            padding: 8px;
            background: rgba(155, 89, 182, 0.1);
            border-radius: 6px;
            font-size: 0.8rem;
            display: flex;
            justify-content: space-between;
        }
        
        .deviation-explanation {
            margin-top: 15px;
            padding: 12px;
            background: rgba(243, 156, 18, 0.1);
            border-radius: 10px;
            font-size: 0.85rem;
        }
        
        .explanation-title {
            font-weight: 700;
            color: #f39c12;
            margin-bottom: 6px;
        }
        
        .explanation-text {
            margin-bottom: 6px;
            line-height: 1.4;
            color: var(--text-color);
        }
        
        .history-section {
            margin-top: 18px;
        }
        
        .history-list {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 10px;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 8px;
            background: var(--card-bg);
        }
        
        .history-item {
            padding: 10px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
        }
        
        .history-item:last-child {
            border-bottom: none;
        }
        
        .history-prediction {
            font-weight: 600;
            color: var(--text-color);
        }
        
        .history-details {
            font-size: 0.75rem;
            color: var(--text-color);
            opacity: 0.7;
            margin-top: 3px;
        }
        
        .history-confidence {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 700;
            min-width: 50px;
            text-align: center;
        }
        
        .history-confidence.positive {
            background: rgba(39, 174, 96, 0.2);
            color: var(--success);
        }
        
        .history-confidence.negative {
            background: rgba(231, 76, 60, 0.2);
            color: var(--danger);
        }
        
        .history-confidence.neutral {
            background: rgba(52, 152, 219, 0.2);
            color: var(--info);
        }
        
        .history-confidence.ml-enhanced {
            background: rgba(155, 89, 182, 0.2);
            color: #9b59b6;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 18px;
        }
        
        .btn {
            flex: 1;
            padding: 14px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: #1c2833;
        }
        
        .btn-secondary {
            background: var(--light);
            color: var(--dark);
            border: 1px solid var(--border-color);
        }
        
        .btn-secondary:hover {
            background: #d5dbdb;
        }
        
        .btn-ml {
            background: #9b59b6;
            color: white;
        }
        
        .btn-ml:hover {
            background: #8e44ad;
        }
        
        .success-animation {
            animation: successPulse 0.5s ease-in-out;
        }
        
        @keyframes successPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .ml-glow {
            animation: mlGlow 2s infinite alternate;
        }
        
        @keyframes mlGlow {
            from { box-shadow: 0 0 5px rgba(155, 89, 182, 0.5); }
            to { box-shadow: 0 0 15px rgba(155, 89, 182, 0.8); }
        }
        
        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: var(--card-bg);
            border-radius: 16px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 25px;
            position: relative;
            transform: translateY(20px);
            transition: transform 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-color);
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.3s;
        }
        
        .modal-close:hover {
            background: rgba(0, 0, 0, 0.1);
        }
        
        .modal-title {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.5rem;
            text-align: center;
            font-weight: 700;
        }
        
        .instruction-section {
            margin-bottom: 25px;
        }
        
        .instruction-title {
            color: var(--primary);
            margin-bottom: 12px;
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .instruction-title i {
            color: var(--info);
        }
        
        .instruction-text {
            line-height: 1.6;
            margin-bottom: 10px;
            color: var(--text-color);
        }
        
        .instruction-list {
            padding-left: 20px;
            margin-bottom: 15px;
        }
        
        .instruction-list li {
            margin-bottom: 8px;
            line-height: 1.5;
            color: var(--text-color);
        }
        
        .strategy-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 15px;
        }
        
        .strategy-card {
            padding: 15px;
            border-radius: 10px;
            background: rgba(52, 152, 219, 0.1);
            border-left: 4px solid var(--info);
        }
        
        .strategy-card.strong-buy {
            background: rgba(39, 174, 96, 0.1);
            border-left-color: var(--success);
        }
        
        .strategy-card.buy {
            background: rgba(52, 152, 219, 0.1);
            border-left-color: var(--info);
        }
        
        .strategy-card.avoid {
            background: rgba(231, 76, 60, 0.1);
            border-left-color: var(--danger);
        }
        
        .strategy-card.ml-enhanced {
            background: rgba(155, 89, 182, 0.1);
            border-left-color: #9b59b6;
        }
        
        .strategy-title {
            font-weight: 700;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }
        
        .strategy-desc {
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .tips-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }
        
        .tip-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 10px;
            background: rgba(243, 156, 18, 0.1);
            border-radius: 8px;
        }
        
        .tip-icon {
            color: var(--warning);
            font-size: 1.2rem;
            margin-top: 2px;
        }
        
        .tip-text {
            flex: 1;
            line-height: 1.5;
        }
        
        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è iPhone */
        @media (max-width: 500px) {
            body {
                padding: 10px;
                align-items: flex-start;
            }
            
            .container {
                max-width: 100%;
            }
            
            .input-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .result-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .league-options {
                flex-direction: column;
            }
            
            .confidence-meter {
                flex-direction: column;
                gap: 8px;
            }
            
            .confidence-bar {
                width: 100%;
            }
            
            .details-grid {
                grid-template-columns: 1fr;
                gap: 5px;
            }
            
            .ml-stats {
                grid-template-columns: 1fr;
            }
            
            .history-list {
                max-height: 150px;
            }
            
            .modal-content {
                padding: 20px;
            }
            
            .header-controls {
                gap: 5px;
            }
        }
        
        /* –î–ª—è —Ü–∏—Ñ—Ä–æ–≤–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –Ω–∞ iOS */
        input[type="number"] {
            -webkit-appearance: none;
            appearance: none;
        }
        
        input[inputmode="numeric"] {
            -webkit-appearance: none;
            appearance: none;
        }
        
        .theme-transition {
            transition: all 0.5s ease;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ñ–æ—Ä–º—ã —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å—á–µ—Ç–∞ */
        .real-score-section {
            margin-top: 15px;
            padding: 12px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 10px;
            border-left: 4px solid #3498db;
        }
        
        .real-score-inputs {
            display: flex;
            gap: 8px;
            align-items: center;
            margin-top: 8px;
        }
        
        .real-score-inputs .input-field {
            flex: 1;
        }
        
        .save-real-score-btn {
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 15px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
        }
        
        .save-real-score-btn:hover {
            background: #2980b9;
        }
        
        .ml-feedback-section {
            margin-top: 15px;
            padding: 12px;
            background: rgba(155, 89, 182, 0.1);
            border-radius: 10px;
            border-left: 4px solid #9b59b6;
        }
        
        .ml-feedback-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }
        
        .feedback-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            font-size: 0.85rem;
        }
        
        .feedback-label {
            color: var(--text-color);
        }
        
        .feedback-value {
            font-weight: 600;
            color: var(--primary);
        }
        
        .feedback-value.positive {
            color: var(--success);
        }
        
        .feedback-value.negative {
            color: var(--danger);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-controls">
                <button class="info-btn" id="info-btn">
                    <i class="fas fa-info"></i>
                </button>
                <button class="theme-toggle" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
            <h1>–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å—Ç–∞–≤–æ–∫ PRO</h1>
            <div class="subtitle">AI-–∞–Ω–∞–ª–∏–∑ —Å ML-–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–æ–π</div>
        </header>
        
        <div class="main-content">
            <div class="input-section">
                <h2 class="section-title">–î–∞–Ω–Ω—ã–µ –º–∞—Ç—á–∞</h2>
                
                <div class="league-selector">
                    <div class="input-label">–õ–∏–≥–∞:</div>
                    <div class="league-options">
                        <div class="league-option active" data-league="nba">NBA (4√ó12)</div>
                        <div class="league-option" data-league="fib–∞">–§–ò–ë–ê (4√ó10)</div>
                        <div class="league-option" data-league="cyber">–ö–∏–±–µ—Ä (4√ó5)</div>
                    </div>
                </div>
                
                <div class="input-grid">
                    <div class="input-group">
                        <label class="input-label">–¢–µ–∫—É—â–∏–π —Å—á–µ—Ç</label>
                        <div class="input-row">
                            <input type="number" class="input-field" id="score1" placeholder="0" min="0" inputmode="numeric">
                            <div class="input-icon">:</div>
                            <input type="number" class="input-field" id="score2" placeholder="0" min="0" inputmode="numeric">
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">–ü–µ—Ä–∏–æ–¥</label>
                        <select class="input-field" id="period">
                            <option value="1">1-—è —á–µ—Ç–≤–µ—Ä—Ç—å</option>
                            <option value="2">2-—è —á–µ—Ç–≤–µ—Ä—Ç—å</option>
                            <option value="3">3-—è —á–µ—Ç–≤–µ—Ä—Ç—å</option>
                            <option value="4">4-—è —á–µ—Ç–≤–µ—Ä—Ç—å</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">–í—Ä–µ–º—è –≤ —á–µ—Ç–≤–µ—Ä—Ç–∏</label>
                        <div class="input-row">
                            <input type="number" class="input-field" id="minutes" placeholder="–º–∏–Ω" min="0" max="12" inputmode="numeric">
                            <div class="input-icon">:</div>
                            <input type="number" class="input-field" id="seconds" placeholder="—Å–µ–∫" min="0" max="59" inputmode="numeric">
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label class="input-label">–¢–æ—Ç–∞–ª –±—É–∫–º–µ–∫–µ—Ä–∞</label>
                        <input type="number" class="input-field" id="line-total" placeholder="215.5" step="0.1" inputmode="decimal">
                    </div>
                </div>
                
                <div class="input-group">
                    <label class="input-label">–¢–∏–ø —Å—Ç–∞–≤–∫–∏</label>
                    <div class="bet-type-selector">
                        <div class="bet-type-btn active" id="bet-over">–¢–ë (–¢–æ—Ç–∞–ª –±–æ–ª—å—à–µ)</div>
                        <div class="bet-type-btn" id="bet-under">–¢–ú (–¢–æ—Ç–∞–ª –º–µ–Ω—å—à–µ)</div>
                    </div>
                </div>
                
                <div class="ml-controls">
                    <div class="ml-toggle">
                        <div class="ml-status" id="ml-status">
                            <i class="fas fa-brain"></i>
                            <span>ML-–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞</span>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="ml-toggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="ml-stats">
                        <div class="ml-stat">
                            <span>–¢–æ—á–Ω–æ—Å—Ç—å ML:</span>
                            <span class="ml-stat-value" id="ml-accuracy">--%</span>
                        </div>
                        <div class="ml-stat">
                            <span>–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞:</span>
                            <span class="ml-stat-value" id="ml-adjustment">--%</span>
                        </div>
                        <div class="ml-stat">
                            <span>–ê–Ω–∞–ª–∏–∑–æ–≤ –≤ –±–∞–∑–µ:</span>
                            <span class="ml-stat-value" id="ml-data-count">0</span>
                        </div>
                        <div class="ml-stat">
                            <span>–£–ª—É—á—à–µ–Ω–∏–µ:</span>
                            <span class="ml-stat-value" id="ml-improvement">+--%</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="real-score-section">
                <div class="input-label">–†–µ–∞–ª—å–Ω—ã–π –∏—Ç–æ–≥–æ–≤—ã–π —Å—á–µ—Ç (–ø–æ—Å–ª–µ –º–∞—Ç—á–∞)</div>
                <div class="real-score-inputs">
                    <input type="number" class="input-field" id="real-score1" placeholder="0" min="0" inputmode="numeric">
                    <div class="input-icon">:</div>
                    <input type="number" class="input-field" id="real-score2" placeholder="0" min="0" inputmode="numeric">
                    <button class="save-real-score-btn" id="save-real-score-btn">
                        <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                    </button>
                </div>
            </div>
            
            <div class="ml-feedback-section">
                <div class="input-label">ML-–æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</div>
                <div class="ml-feedback-grid">
                    <div class="feedback-item">
                        <span class="feedback-label">–ü—Ä–æ–≥–Ω–æ–∑ vs –†–µ–∞–ª—å–Ω–æ—Å—Ç—å:</span>
                        <span class="feedback-value neutral" id="prediction-accuracy">--</span>
                    </div>
                    <div class="feedback-item">
                        <span class="feedback-label">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</span>
                        <span class="feedback-value neutral" id="recommendation-accuracy">--</span>
                    </div>
                    <div class="feedback-item">
                        <span class="feedback-label">–û—à–∏–±–∫–∞ –ø—Ä–æ–≥–Ω–æ–∑–∞:</span>
                        <span class="feedback-value neutral" id="prediction-error">--</span>
                    </div>
                    <div class="feedback-item">
                        <span class="feedback-label">–°—Ç–∞—Ç—É—Å –æ–±—É—á–µ–Ω–∏—è:</span>
                        <span class="feedback-value neutral" id="training-status">–ù–µ –æ–±—É—á–µ–Ω–æ</span>
                    </div>
                </div>
            </div>
            
            <div class="results-section">
                <h2 class="section-title">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞</h2>
                
                <div class="result-grid">
                    <div class="result-card">
                        <div class="result-title">–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—ã–π —Ç–æ—Ç–∞–ª</div>
                        <div class="result-value neutral" id="predicted-total">--</div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-title">–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç –ª–∏–Ω–∏–∏</div>
                        <div class="result-value neutral" id="deviation-value">--</div>
                    </div>
                </div>
                
                <div class="recommendation" id="recommendation">
                    <div class="recommendation-title" id="recommendation-text">–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞</div>
                    <div class="confidence-meter">
                        <span class="confidence-text">–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å:</span>
                        <div class="confidence-bar">
                            <div class="confidence-fill" id="confidence-bar" style="width: 0%"></div>
                        </div>
                        <span class="confidence-value" id="confidence-value">0%</span>
                    </div>
                    <div class="ml-badge" id="ml-badge" style="display: none;">AI Enhanced</div>
                </div>
                
                <div class="ml-correction" id="ml-correction" style="display: none;">
                    <span>ML-–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏:</span>
                    <span class="ml-stat-value" id="ml-correction-value">+0%</span>
                </div>
                
                <div class="details">
                    <div class="details-title">–î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞</div>
                    <div class="details-grid">
                        <div class="detail-item">
                            <span class="detail-label">–¢–µ–º–ø –∏–≥—Ä—ã:</span>
                            <span class="detail-value" id="pace-value">-- –æ—á/–º–∏–Ω</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">–û—Å—Ç–∞–ª–æ—Å—å –≤—Ä–µ–º–µ–Ω–∏:</span>
                            <span class="detail-value" id="time-left">-- –º–∏–Ω</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">–ü–æ—Ä–æ–≥ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è:</span>
                            <span class="detail-value" id="threshold-value">5.0 –æ—á</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">–¢–∏–ø –ª–∏–≥–∏:</span>
                            <span class="detail-value" id="league-type">NBA</span>
                        </div>
                    </div>
                </div>
                
                <div class="deviation-explanation">
                    <div class="explanation-title">–ü–æ—á–µ–º—É –¢–ë/–¢–ú?</div>
                    <div class="explanation-text">
                        <strong>–¢–ë (–¢–æ—Ç–∞–ª –±–æ–ª—å—à–µ)</strong> —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –ø—Ä–æ–≥–Ω–æ–∑ –í–´–®–ï —Ç–æ—Ç–∞–ª–∞ –±—É–∫–º–µ–∫–µ—Ä–∞ –Ω–∞ 5+ –æ—á–∫–æ–≤.
                    </div>
                    <div class="explanation-text">
                        <strong>–¢–ú (–¢–æ—Ç–∞–ª –º–µ–Ω—å—à–µ)</strong> —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –ø—Ä–æ–≥–Ω–æ–∑ –ù–ò–ñ–ï —Ç–æ—Ç–∞–ª–∞ –±—É–∫–º–µ–∫–µ—Ä–∞ –Ω–∞ 5+ –æ—á–∫–æ–≤.
                    </div>
                    <div class="explanation-text">
                        –ß–µ–º –±–æ–ª—å—à–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ, —Ç–µ–º –≤—ã—à–µ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.
                    </div>
                </div>
            </div>
            
            <div class="history-section">
                <h2 class="section-title">–ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—á–µ—Ç–æ–≤</h2>
                <div class="history-list" id="history-list">
                    <!-- –ò—Å—Ç–æ—Ä–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn btn-primary" id="calculate-btn">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
                <button class="btn btn-secondary" id="clear-btn">–û—á–∏—Å—Ç–∏—Ç—å</button>
                <button class="btn btn-ml" id="ml-train-btn">–û–±—É—á–∏—Ç—å ML</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ -->
    <div class="modal-overlay" id="instruction-modal">
        <div class="modal-content">
            <button class="modal-close" id="modal-close">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="modal-title">ü§ñ AI –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å—Ç–∞–≤–æ–∫ PRO</h2>
            
            <div class="instruction-section">
                <h3 class="instruction-title"><i class="fas fa-robot"></i> ML-–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞</h3>
                <p class="instruction-text">–ù–∞—à –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–µ–π –∏—Å—Ç–æ—Ä–∏–∏ —Å—Ç–∞–≤–æ–∫.</p>
                
                <div class="strategy-card ml-enhanced">
                    <div class="strategy-title">ü§ñ AI-–ê–ù–ê–õ–ò–ó –í–ö–õ–Æ–ß–ï–ù</div>
                    <div class="strategy-desc">
                        –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∞—à–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Ä–∞—Å—á–µ—Ç—ã –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è—Ö:<br>
                        ‚Ä¢ <strong>–ê–≤—Ç–æ–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞</strong> –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–æ—á–Ω–æ—Å—Ç–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø—Ä–æ–≥–Ω–æ–∑–æ–≤<br>
                        ‚Ä¢ <strong>–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ—Ä–æ–≥</strong> - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏<br>
                        ‚Ä¢ <strong>–£–º–Ω—ã–π —É—á–µ—Ç —Ç—Ä–µ–Ω–¥–æ–≤</strong> - –∞–Ω–∞–ª–∏–∑ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –ª–∏–≥–∞—Ö<br>
                        ‚Ä¢ <strong>–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è</strong> - —Å–∏—Å—Ç–µ–º–∞ —É—á–∏—Ç—Å—è –Ω–∞ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
                    </div>
                </div>
            </div>
            
            <div class="instruction-section">
                <h3 class="instruction-title"><i class="fas fa-play-circle"></i> –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä</h3>
                <p class="instruction-text">–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å—Ç–∞–≤–æ–∫ PRO –ø–æ–º–æ–≥–∞–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤—ã–≥–æ–¥–Ω—ã–µ —Å—Ç–∞–≤–∫–∏ –Ω–∞ —Ç–æ—Ç–∞–ª –≤ –±–∞—Å–∫–µ—Ç–±–æ–ª–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –º–∞—Ç—á–∞.</p>
                
                <ol class="instruction-list">
                    <li><strong>–í—ã–±–µ—Ä–∏—Ç–µ –ª–∏–≥—É</strong> - —É–∫–∞–∂–∏—Ç–µ —Ç–∏–ø –±–∞—Å–∫–µ—Ç–±–æ–ª—å–Ω–æ–π –ª–∏–≥–∏ (NBA, –§–ò–ë–ê –∏–ª–∏ –ö–∏–±–µ—Ä)</li>
                    <li><strong>–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—É—â–∏–π —Å—á–µ—Ç</strong> - –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å—á–µ—Ç –º–∞—Ç—á–∞ –Ω–∞ –º–æ–º–µ–Ω—Ç –∞–Ω–∞–ª–∏–∑–∞</li>
                    <li><strong>–£–∫–∞–∂–∏—Ç–µ –ø–µ—Ä–∏–æ–¥ –∏ –≤—Ä–µ–º—è</strong> - —Ç–µ–∫—É—â–∞—è —á–µ—Ç–≤–µ—Ä—Ç—å –∏ –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤ –Ω–µ–π –≤—Ä–µ–º—è</li>
                    <li><strong>–í–≤–µ–¥–∏—Ç–µ —Ç–æ—Ç–∞–ª –±—É–∫–º–µ–∫–µ—Ä–∞</strong> - –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–æ—Ç–∞–ª–∞, –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º–æ–µ –±—É–∫–º–µ–∫–µ—Ä–æ–º</li>
                    <li><strong>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Å—Ç–∞–≤–∫–∏</strong> - –¢–ë (—Ç–æ—Ç–∞–ª –±–æ–ª—å—à–µ) –∏–ª–∏ –¢–ú (—Ç–æ—Ç–∞–ª –º–µ–Ω—å—à–µ)</li>
                    <li><strong>–í–∫–ª—é—á–∏—Ç–µ ML-–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫—É</strong> –¥–ª—è AI-—É–ª—É—á—à–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏</li>
                    <li><strong>–ù–∞–∂–º–∏—Ç–µ "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å"</strong> - –ø–æ–ª—É—á–∏—Ç–µ –ø—Ä–æ–≥–Ω–æ–∑ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é</li>
                    <li><strong>–ü–æ—Å–ª–µ –º–∞—Ç—á–∞ –≤–≤–µ–¥–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π —Å—á–µ—Ç</strong> –¥–ª—è –æ–±—É—á–µ–Ω–∏—è ML-–º–æ–¥–µ–ª–∏</li>
                </ol>
            </div>
            
            <div class="instruction-section">
                <h3 class="instruction-title"><i class="fas fa-chart-line"></i> –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π</h3>
                <p class="instruction-text">–û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º–æ–≥–æ —Ç–æ—Ç–∞–ª–∞ –æ—Ç –ª–∏–Ω–∏–∏ –±—É–∫–º–µ–∫–µ—Ä–∞:</p>
                
                <div class="strategy-grid">
                    <div class="strategy-card strong-buy">
                        <div class="strategy-title">–°–¢–†–û–ù–ì –¢–ë/–¢–ú ‚¨ÜÔ∏è‚¨áÔ∏è</div>
                        <div class="strategy-desc">
                            <strong>–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: >5 –æ—á–∫–æ–≤</strong><br>
                            –í—ã—Å–æ–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (15-25%)<br>
                            –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É - —Å–∏–ª—å–Ω—ã–π —Å–∏–≥–Ω–∞–ª
                        </div>
                    </div>
                    
                    <div class="strategy-card buy">
                        <div class="strategy-title">–¢–ë/–¢–ú ‚úÖ</div>
                        <div class="strategy-desc">
                            <strong>–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: 1-5 –æ—á–∫–æ–≤</strong><br>
                            –°—Ä–µ–¥–Ω—è—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (5-15%)<br>
                            –ú–æ–∂–Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞–≤–∫—É - —É–º–µ—Ä–µ–Ω–Ω—ã–π —Å–∏–≥–Ω–∞–ª
                        </div>
                    </div>
                    
                    <div class="strategy-card avoid">
                        <div class="strategy-title">–ò–ó–ë–ï–ì–ê–¢–¨ ‚ùå</div>
                        <div class="strategy-desc">
                            <strong>–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ: <1 –æ—á–∫–∞</strong><br>
                            –ù–∏–∑–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (0-5%)<br>
                            –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è - —Å–ª–∞–±—ã–π –∏–ª–∏ –æ–±—Ä–∞—Ç–Ω—ã–π —Å–∏–≥–Ω–∞–ª
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="instruction-section">
                <h3 class="instruction-title"><i class="fas fa-lightbulb"></i> –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã</h3>
                
                <div class="tips-grid">
                    <div class="tip-item">
                        <div class="tip-icon"><i class="fas fa-brain"></i></div>
                        <div class="tip-text">
                            <strong>–í–∫–ª—é—á–∏—Ç–µ ML-–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫—É</strong> - —Å–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç–æ—á–Ω–µ–µ —Å –∫–∞–∂–¥—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º, –æ–±—É—á–∞—è—Å—å –Ω–∞ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
                        </div>
                    </div>
                    
                    <div class="tip-item">
                        <div class="tip-icon"><i class="fas fa-clock"></i></div>
                        <div class="tip-text">
                            <strong>–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –≤–æ –≤—Ä–µ–º—è –º–∞—Ç—á–∞</strong> - –ª—É—á—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –ø–æ—Å–ª–µ 2-3 —á–µ—Ç–≤–µ—Ä—Ç–µ–π, –∫–æ–≥–¥–∞ —Ç–µ–º–ø –∏–≥—Ä—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è
                        </div>
                    </div>
                    
                    <div class="tip-item">
                        <div class="tip-icon"><i class="fas fa-basketball-ball"></i></div>
                        <div class="tip-text">
                            <strong>–£—á–∏—Ç—ã–≤–∞–π—Ç–µ —Ç–∏–ø –ª–∏–≥–∏</strong> - –≤ –∫–∏–±–µ—Ä–±–∞—Å–∫–µ—Ç–±–æ–ª–µ —Ç–µ–º–ø –≤—ã—à–µ, –ø–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–Ω–æ–∂–∏—Ç–µ–ª—å 1.15
                        </div>
                    </div>
                    
                    <div class="tip-item">
                        <div class="tip-icon"><i class="fas fa-chart-bar"></i></div>
                        <div class="tip-text">
                            <strong>–í–≤–æ–¥–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</strong> - —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç ML-–º–æ–¥–µ–ª–∏ –æ–±—É—á–∞—Ç—å—Å—è –∏ —É–ª—É—á—à–∞—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≥–Ω–æ–∑–æ–≤
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
            const themeToggle = document.getElementById('theme-toggle');
            const themeIcon = themeToggle.querySelector('i');
            const infoBtn = document.getElementById('info-btn');
            const instructionModal = document.getElementById('instruction-modal');
            const modalClose = document.getElementById('modal-close');
            
            const score1Input = document.getElementById('score1');
            const score2Input = document.getElementById('score2');
            const periodSelect = document.getElementById('period');
            const minutesInput = document.getElementById('minutes');
            const secondsInput = document.getElementById('seconds');
            const lineTotalInput = document.getElementById('line-total');
            const betOverBtn = document.getElementById('bet-over');
            const betUnderBtn = document.getElementById('bet-under');
            const calculateBtn = document.getElementById('calculate-btn');
            const clearBtn = document.getElementById('clear-btn');
            const leagueOptions = document.querySelectorAll('.league-option');
            
            // ML —ç–ª–µ–º–µ–Ω—Ç—ã
            const mlToggle = document.getElementById('ml-toggle');
            const mlStatus = document.getElementById('ml-status');
            const mlAccuracy = document.getElementById('ml-accuracy');
            const mlAdjustment = document.getElementById('ml-adjustment');
            const mlDataCount = document.getElementById('ml-data-count');
            const mlImprovement = document.getElementById('ml-improvement');
            const mlTrainBtn = document.getElementById('ml-train-btn');
            const mlBadge = document.getElementById('ml-badge');
            const mlCorrection = document.getElementById('ml-correction');
            const mlCorrectionValue = document.getElementById('ml-correction-value');
            
            // –≠–ª–µ–º–µ–Ω—Ç—ã —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å—á–µ—Ç–∞
            const realScore1Input = document.getElementById('real-score1');
            const realScore2Input = document.getElementById('real-score2');
            const saveRealScoreBtn = document.getElementById('save-real-score-btn');
            
            // –≠–ª–µ–º–µ–Ω—Ç—ã –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ ML
            const predictionAccuracyEl = document.getElementById('prediction-accuracy');
            const recommendationAccuracyEl = document.getElementById('recommendation-accuracy');
            const predictionErrorEl = document.getElementById('prediction-error');
            const trainingStatusEl = document.getElementById('training-status');
            
            // –≠–ª–µ–º–µ–Ω—Ç—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            const predictedTotalEl = document.getElementById('predicted-total');
            const deviationValueEl = document.getElementById('deviation-value');
            const recommendationEl = document.getElementById('recommendation');
            const recommendationTextEl = document.getElementById('recommendation-text');
            const confidenceBarEl = document.getElementById('confidence-bar');
            const confidenceValueEl = document.getElementById('confidence-value');
            const paceValueEl = document.getElementById('pace-value');
            const timeLeftEl = document.getElementById('time-left');
            const thresholdValueEl = document.getElementById('threshold-value');
            const leagueTypeEl = document.getElementById('league-type');
            const historyListEl = document.getElementById('history-list');
            
            // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
            let currentLeague = 'nba';
            let currentBetType = 'over';
            let calculationHistory = [];
            let mlData = {
                enabled: true,
                accuracy: 0,
                totalPredictions: 0,
                correctPredictions: 0,
                adjustmentFactor: 1.0,
                leagueAccuracy: {},
                recentPerformance: [],
                trainedWithRealData: false
            };
            let isDarkTheme = false;
            let lastPrediction = null;
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
            initializeApp();
            
            function initializeApp() {
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –ª–∏–≥
                leagueOptions.forEach(option => {
                    option.addEventListener('click', function() {
                        leagueOptions.forEach(opt => opt.classList.remove('active'));
                        this.classList.add('active');
                        currentLeague = this.getAttribute('data-league');
                        updateLeagueInfo();
                        autoCalculate();
                    });
                });
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ç–∏–ø–∞ —Å—Ç–∞–≤–∫–∏
                betOverBtn.addEventListener('click', function() {
                    betOverBtn.classList.add('active');
                    betUnderBtn.classList.remove('active');
                    currentBetType = 'over';
                    autoCalculate();
                });
                
                betUnderBtn.addEventListener('click', function() {
                    betUnderBtn.classList.add('active');
                    betOverBtn.classList.remove('active');
                    currentBetType = 'under';
                    autoCalculate();
                });
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
                const inputFields = [score1Input, score2Input, periodSelect, minutesInput, secondsInput, lineTotalInput];
                inputFields.forEach(field => {
                    field.addEventListener('input', autoCalculate);
                });
                
                // –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
                calculateBtn.addEventListener('click', performCalculation);
                clearBtn.addEventListener('click', clearForm);
                mlTrainBtn.addEventListener('click', trainMLModel);
                saveRealScoreBtn.addEventListener('click', saveRealScore);
                
                // ML –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å
                mlToggle.addEventListener('change', function() {
                    mlData.enabled = this.checked;
                    updateMLStatus();
                    autoCalculate();
                    saveMLData();
                });
                
                // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
                themeToggle.addEventListener('click', toggleTheme);
                
                // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
                infoBtn.addEventListener('click', openInstructionModal);
                modalClose.addEventListener('click', closeInstructionModal);
                instructionModal.addEventListener('click', function(e) {
                    if (e.target === instructionModal) {
                        closeInstructionModal();
                    }
                });
                
                // –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∏ ML –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage
                loadHistory();
                loadMLData();
                
                // –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç
                autoCalculate();
            }
            
            function toggleTheme() {
                isDarkTheme = !isDarkTheme;
                document.body.classList.toggle('dark-theme', isDarkTheme);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É
                if (isDarkTheme) {
                    themeIcon.classList.remove('fa-moon');
                    themeIcon.classList.add('fa-sun');
                } else {
                    themeIcon.classList.remove('fa-sun');
                    themeIcon.classList.add('fa-moon');
                }
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Ç–µ–º—ã
                localStorage.setItem('betAnalyzerTheme', isDarkTheme ? 'dark' : 'light');
            }
            
            function openInstructionModal() {
                instructionModal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
            
            function closeInstructionModal() {
                instructionModal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
            
            function updateLeagueInfo() {
                let leagueName = '';
                let periodMinutes = 0;
                
                switch(currentLeague) {
                    case 'nba':
                        leagueName = 'NBA';
                        periodMinutes = 12;
                        break;
                    case 'fib–∞':
                        leagueName = '–§–ò–ë–ê';
                        periodMinutes = 10;
                        break;
                    case 'cyber':
                        leagueName = '–ö–∏–±–µ—Ä';
                        periodMinutes = 5;
                        break;
                }
                
                leagueTypeEl.textContent = leagueName;
                minutesInput.max = periodMinutes;
            }
            
            function updateMLStatus() {
                if (mlData.enabled) {
                    mlStatus.classList.add('active');
                    mlTrainBtn.style.display = 'block';
                } else {
                    mlStatus.classList.remove('active');
                    mlTrainBtn.style.display = 'none';
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É ML
                mlAccuracy.textContent = `${(mlData.accuracy * 100).toFixed(1)}%`;
                mlAdjustment.textContent = `${((mlData.adjustmentFactor - 1) * 100).toFixed(1)}%`;
                mlDataCount.textContent = mlData.totalPredictions;
                mlImprovement.textContent = `+${(mlData.accuracy * 15).toFixed(1)}%`;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –æ–±—É—á–µ–Ω–∏—è
                if (mlData.trainedWithRealData) {
                    trainingStatusEl.textContent = "–û–±—É—á–µ–Ω–∞";
                    trainingStatusEl.className = "feedback-value positive";
                } else {
                    trainingStatusEl.textContent = "–ù–µ –æ–±—É—á–µ–Ω–∞";
                    trainingStatusEl.className = "feedback-value negative";
                }
            }
            
            function autoCalculate() {
                // –ê–≤—Ç–æ—Ä–∞—Å—á–µ—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
                const hasData = score1Input.value && score2Input.value && minutesInput.value && secondsInput.value;
                
                if (hasData) {
                    performCalculation(false);
                }
            }
            
            function performCalculation(saveToHistory = true) {
                // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–æ—Ä–º—ã
                const score1 = parseInt(score1Input.value) || 0;
                const score2 = parseInt(score2Input.value) || 0;
                const period = parseInt(periodSelect.value);
                const minutes = parseInt(minutesInput.value) || 0;
                const seconds = parseInt(secondsInput.value) || 0;
                const lineTotal = parseFloat(lineTotalInput.value) || 0;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
                if (score1 === 0 && score2 === 0) {
                    showResult('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—É—â–∏–π —Å—á–µ—Ç –º–∞—Ç—á–∞', 'neutral', 0);
                    return;
                }
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—ã–π —Ç–æ—Ç–∞–ª
                const predictedTotal = calculatePredictedTotal(score1, score2, period, minutes, seconds);
                predictedTotalEl.textContent = predictedTotal.toFixed(1);
                predictedTotalEl.classList.add('success-animation');
                setTimeout(() => predictedTotalEl.classList.remove('success-animation'), 500);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø—Ä–æ–≥–Ω–æ–∑ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è ML
                lastPrediction = {
                    score1: score1,
                    score2: score2,
                    period: period,
                    minutes: minutes,
                    seconds: seconds,
                    lineTotal: lineTotal,
                    predictedTotal: predictedTotal,
                    betType: currentBetType,
                    timestamp: new Date()
                };
                
                // –ï—Å–ª–∏ –≤–≤–µ–¥–µ–Ω —Ç–æ—Ç–∞–ª –±—É–∫–º–µ–∫–µ—Ä–∞, —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é
                if (lineTotal > 0) {
                    const deviation = predictedTotal - lineTotal;
                    deviationValueEl.textContent = `${deviation > 0 ? '+' : ''}${deviation.toFixed(1)}`;
                    
                    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ü–≤–µ—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
                    if (deviation > 5) {
                        deviationValueEl.className = 'result-value positive';
                    } else if (deviation < -5) {
                        deviationValueEl.className = 'result-value negative';
                    } else {
                        deviationValueEl.className = 'result-value neutral';
                    }
                    
                    // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫—É —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
                    let confidenceResult = calculateConfidenceAdjustment(deviation, currentBetType);
                    
                    // –ü—Ä–∏–º–µ–Ω—è–µ–º ML-–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫—É –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ
                    let mlBoost = 0;
                    if (mlData.enabled && mlData.totalPredictions > 5) {
                        const mlCorrectionResult = applyMLCorrection(confidenceResult, currentLeague);
                        confidenceResult.adjustment = mlCorrectionResult.adjustment;
                        mlBoost = mlCorrectionResult.mlBoost;
                        
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º ML-–±–µ–π–¥–∂ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫—É
                        mlBadge.style.display = 'block';
                        mlCorrection.style.display = 'flex';
                        mlCorrectionValue.textContent = `${mlBoost > 0 ? '+' : ''}${mlBoost.toFixed(1)}%`;
                        recommendationEl.classList.add('ml-enhanced');
                        recommendationEl.classList.add('ml-glow');
                    } else {
                        mlBadge.style.display = 'none';
                        mlCorrection.style.display = 'none';
                        recommendationEl.classList.remove('ml-enhanced');
                        recommendationEl.classList.remove('ml-glow');
                    }
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é
                    showResult(confidenceResult.recommendation, confidenceResult.type, confidenceResult.adjustment);
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
                    if (saveToHistory) {
                        saveToHistoryList(score1, score2, predictedTotal, lineTotal, currentBetType, confidenceResult, mlBoost);
                    }
                } else {
                    deviationValueEl.textContent = '--';
                    deviationValueEl.className = 'result-value neutral';
                    showResult('–í–≤–µ–¥–∏—Ç–µ —Ç–æ—Ç–∞–ª –±—É–∫–º–µ–∫–µ—Ä–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏', 'neutral', 0);
                    mlBadge.style.display = 'none';
                    mlCorrection.style.display = 'none';
                    recommendationEl.classList.remove('ml-enhanced');
                    recommendationEl.classList.remove('ml-glow');
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –¥–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞
                updateCalculationDetails(score1, score2, period, minutes, seconds);
            }
            
            function calculatePredictedTotal(score1, score2, period, minutes, seconds) {
                const totalScore = score1 + score2;
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ª–∏–≥–∏
                let minutesPerPeriod, totalPeriods, paceMultiplier;
                
                switch(currentLeague) {
                    case 'nba':
                        minutesPerPeriod = 12;
                        totalPeriods = 4;
                        paceMultiplier = 1.0;
                        break;
                    case 'fib–∞':
                        minutesPerPeriod = 10;
                        totalPeriods = 4;
                        paceMultiplier = 1.0;
                        break;
                    case 'cyber':
                        minutesPerPeriod = 5;
                        totalPeriods = 4;
                        paceMultiplier = 1.15;
                        break;
                }
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è –≤ –º–∏–Ω—É—Ç–∞—Ö
                const elapsedMinutesInPeriod = minutes + seconds / 60;
                const totalElapsedMinutes = (period - 1) * minutesPerPeriod + elapsedMinutesInPeriod;
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è –≤ –º–∏–Ω—É—Ç–∞—Ö
                const remainingMinutesInPeriod = minutesPerPeriod - elapsedMinutesInPeriod;
                const fullPeriodsRemaining = totalPeriods - period;
                const totalRemainingMinutes = remainingMinutesInPeriod + (fullPeriodsRemaining * minutesPerPeriod);
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π —Ç–µ–º–ø (–æ—á–∫–æ–≤ –≤ –º–∏–Ω—É—Ç—É)
                const currentPace = totalElapsedMinutes > 0 ? totalScore / totalElapsedMinutes : 2.0;
                
                // –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º –æ—á–∫–∏ –Ω–∞ –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è
                const predictedAdditionalPoints = currentPace * totalRemainingMinutes * paceMultiplier;
                
                // –ò—Ç–æ–≥–æ–≤—ã–π –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—ã–π —Ç–æ—Ç–∞–ª
                return totalScore + predictedAdditionalPoints;
            }
            
            function calculateConfidenceAdjustment(deviation, betType) {
                const threshold = 5.0; // –ü–æ—Ä–æ–≥ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
                let adjustment = 0;
                let recommendation = "";
                let type = "neutral";
                
                if (betType === 'over') {
                    if (deviation > threshold) {
                        adjustment = Math.min(25, (deviation - threshold) * 0.8);
                        recommendation = "–°–¢–†–û–ù–ì –¢–ë ‚¨ÜÔ∏è";
                        type = "strong-buy";
                    } else if (deviation > 0) {
                        adjustment = Math.min(10, deviation * 0.3);
                        recommendation = "–¢–ë ‚úÖ";
                        type = "buy";
                    } else {
                        adjustment = Math.max(-20, deviation * 0.4);
                        recommendation = "–ò–ó–ë–ï–ì–ê–¢–¨ –¢–ë ‚ùå";
                        type = "avoid";
                    }
                } else { // under
                    if (deviation < -threshold) {
                        adjustment = Math.min(25, (Math.abs(deviation) - threshold) * 0.8);
                        recommendation = "–°–¢–†–û–ù–ì –¢–ú ‚¨áÔ∏è";
                        type = "strong-buy";
                    } else if (deviation < 0) {
                        adjustment = Math.min(10, Math.abs(deviation) * 0.3);
                        recommendation = "–¢–ú ‚úÖ";
                        type = "buy";
                    } else {
                        adjustment = Math.max(-20, -deviation * 0.4);
                        recommendation = "–ò–ó–ë–ï–ì–ê–¢–¨ –¢–ú ‚ùå";
                        type = "avoid";
                    }
                }
                
                // –û–∫—Ä—É–≥–ª—è–µ–º –¥–æ –¥–≤—É—Ö –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π
                adjustment = Math.round(adjustment * 100) / 100;
                
                return {
                    adjustment: Math.abs(adjustment),
                    recommendation: recommendation,
                    type: type,
                    deviation: deviation
                };
            }
            
            function applyMLCorrection(confidenceResult, league) {
                // –ë–∞–∑–æ–≤—ã–π –±—É—Å—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–æ—á–Ω–æ—Å—Ç–∏ ML
                let mlBoost = mlData.accuracy * 15; // –î–æ 15% –±—É—Å—Ç–∞
                
                // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ª–∏–≥–∏
                if (mlData.leagueAccuracy[league]) {
                    mlBoost *= mlData.leagueAccuracy[league].factor || 1.0;
                }
                
                // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–µ–¥–∞–≤–Ω–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
                if (mlData.recentPerformance.length > 0) {
                    const recentAvg = mlData.recentPerformance.reduce((a, b) => a + b, 0) / mlData.recentPerformance.length;
                    mlBoost *= (0.8 + recentAvg * 0.4); // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –æ—Ç 0.8x –¥–æ 1.2x
                }
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º –±—É—Å—Ç –∫ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
                const adjustedConfidence = Math.min(30, confidenceResult.adjustment + mlBoost);
                
                return {
                    adjustment: adjustedConfidence,
                    mlBoost: mlBoost
                };
            }
            
            function saveRealScore() {
                const realScore1 = parseInt(realScore1Input.value) || 0;
                const realScore2 = parseInt(realScore2Input.value) || 0;
                
                if (realScore1 === 0 && realScore2 === 0) {
                    alert('–í–≤–µ–¥–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π –∏—Ç–æ–≥–æ–≤—ã–π —Å—á–µ—Ç –º–∞—Ç—á–∞');
                    return;
                }
                
                if (!lastPrediction) {
                    alert('–°–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Ä–∞—Å—á–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑–∞');
                    return;
                }
                
                const realTotal = realScore1 + realScore2;
                const predictionError = Math.abs(lastPrediction.predictedTotal - realTotal);
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –±—ã–ª–∞ –ª–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π
                let recommendationCorrect = false;
                if ((lastPrediction.betType === 'over' && realTotal > lastPrediction.lineTotal) ||
                    (lastPrediction.betType === 'under' && realTotal < lastPrediction.lineTotal)) {
                    recommendationCorrect = true;
                }
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–æ—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≥–Ω–æ–∑–∞
                const predictionAccuracy = Math.max(0, 100 - (predictionError / realTotal * 100));
                
                // –û–±–Ω–æ–≤–ª—è–µ–º ML –¥–∞–Ω–Ω—ã–µ
                mlData.totalPredictions++;
                if (recommendationCorrect) {
                    mlData.correctPredictions++;
                }
                mlData.accuracy = mlData.correctPredictions / mlData.totalPredictions;
                mlData.adjustmentFactor = 1.0 + (mlData.accuracy * 0.3);
                mlData.trainedWithRealData = true;
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
                mlData.recentPerformance.push(recommendationCorrect ? 1 : 0);
                if (mlData.recentPerformance.length > 5) {
                    mlData.recentPerformance.shift();
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è —Ç–µ–∫—É—â–µ–π –ª–∏–≥–∏
                if (!mlData.leagueAccuracy[currentLeague]) {
                    mlData.leagueAccuracy[currentLeague] = { accuracy: 0, factor: 1.0 };
                }
                mlData.leagueAccuracy[currentLeague].accuracy = mlData.accuracy;
                mlData.leagueAccuracy[currentLeague].factor = 0.9 + (mlData.accuracy * 0.2);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å
                updateMLFeedback(predictionAccuracy, recommendationCorrect, predictionError);
                
                saveMLData();
                updateMLStatus();
                
                // –û—á–∏—â–∞–µ–º –ø–æ–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å—á–µ—Ç–∞
                realScore1Input.value = '';
                realScore2Input.value = '';
                
                alert(`–†–µ–∞–ª—å–Ω—ã–π —Å—á–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω!\n–¢–æ—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≥–Ω–æ–∑–∞: ${predictionAccuracy.toFixed(1)}%\n–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: ${recommendationCorrect ? '–ü–†–ê–í–ò–õ–¨–ù–ê–Ø' : '–ù–ï–ü–†–ê–í–ò–õ–¨–ù–ê–Ø'}`);
            }
            
            function updateMLFeedback(predictionAccuracy, recommendationCorrect, predictionError) {
                predictionAccuracyEl.textContent = `${predictionAccuracy.toFixed(1)}%`;
                if (predictionAccuracy >= 90) {
                    predictionAccuracyEl.className = "feedback-value positive";
                } else if (predictionAccuracy >= 80) {
                    predictionAccuracyEl.className = "feedback-value";
                } else {
                    predictionAccuracyEl.className = "feedback-value negative";
                }
                
                recommendationAccuracyEl.textContent = recommendationCorrect ? "–ü–†–ê–í–ò–õ–¨–ù–ê–Ø" : "–ù–ï–ü–†–ê–í–ò–õ–¨–ù–ê–Ø";
                recommendationAccuracyEl.className = recommendationCorrect ? "feedback-value positive" : "feedback-value negative";
                
                predictionErrorEl.textContent = `${predictionError.toFixed(1)} –æ—á–∫–æ–≤`;
                if (predictionError <= 5) {
                    predictionErrorEl.className = "feedback-value positive";
                } else if (predictionError <= 10) {
                    predictionErrorEl.className = "feedback-value";
                } else {
                    predictionErrorEl.className = "feedback-value negative";
                }
            }
            
            function trainMLModel() {
                if (calculationHistory.length < 3) {
                    alert('–ù—É–∂–Ω–æ –∫–∞–∫ –º–∏–Ω–∏–º—É–º 3 —Ä–∞—Å—á–µ—Ç–∞ –≤ –∏—Å—Ç–æ—Ä–∏–∏ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è ML –º–æ–¥–µ–ª–∏');
                    return;
                }
                
                if (!mlData.trainedWithRealData) {
                    alert('–î–ª—è –æ–±—É—á–µ–Ω–∏—è ML –º–æ–¥–µ–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–∞—Ç—á–µ–π');
                    return;
                }
                
                // –ò–º–∏—Ç–∞—Ü–∏—è –æ–±—É—á–µ–Ω–∏—è ML –º–æ–¥–µ–ª–∏
                const trainingData = calculationHistory.slice(0, 10); // –ë–µ—Ä–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –∑–∞–ø–∏—Å–µ–π
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º "—Ç–æ—á–Ω–æ—Å—Ç—å" –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π (—á–µ–º –º–µ–Ω—å—à–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ, —Ç–µ–º —Ç–æ—á–Ω–µ–µ)
                let totalError = 0;
                let correctPredictions = 0;
                
                trainingData.forEach(item => {
                    const error = Math.abs(item.predictedTotal - item.lineTotal);
                    totalError += error;
                    
                    // –°—á–∏—Ç–∞–µ–º –ø—Ä–æ–≥–Ω–æ–∑ "–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º" –µ—Å–ª–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –±—ã–ª–æ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
                    if ((item.betType === 'over' && item.predictedTotal > item.lineTotal) ||
                        (item.betType === 'under' && item.predictedTotal < item.lineTotal)) {
                        correctPredictions++;
                    }
                });
                
                const avgError = totalError / trainingData.length;
                const accuracy = correctPredictions / trainingData.length;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º ML –¥–∞–Ω–Ω—ã–µ
                mlData.accuracy = accuracy;
                mlData.totalPredictions = trainingData.length;
                mlData.correctPredictions = correctPredictions;
                mlData.adjustmentFactor = 1.0 + (accuracy * 0.3); // –î–æ 30% –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
                mlData.recentPerformance.push(accuracy);
                if (mlData.recentPerformance.length > 5) {
                    mlData.recentPerformance.shift();
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è —Ç–µ–∫—É—â–µ–π –ª–∏–≥–∏
                if (!mlData.leagueAccuracy[currentLeague]) {
                    mlData.leagueAccuracy[currentLeague] = { accuracy: 0, factor: 1.0 };
                }
                mlData.leagueAccuracy[currentLeague].accuracy = accuracy;
                mlData.leagueAccuracy[currentLeague].factor = 0.9 + (accuracy * 0.2);
                
                saveMLData();
                updateMLStatus();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—É—á–µ–Ω–∏—è
                alert(`ML –º–æ–¥–µ–ª—å –æ–±—É—á–µ–Ω–∞!\n–¢–æ—á–Ω–æ—Å—Ç—å: ${(accuracy * 100).toFixed(1)}%\n–°—Ä–µ–¥–Ω—è—è –æ—à–∏–±–∫–∞: ${avgError.toFixed(1)} –æ—á–∫–æ–≤\n–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞: +${((mlData.adjustmentFactor - 1) * 100).toFixed(1)}%`);
                
                // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–≥–Ω–æ–∑ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–π ML –º–æ–¥–µ–ª—å—é
                autoCalculate();
            }
            
            function showResult(recommendation, type, confidence) {
                recommendationTextEl.textContent = recommendation;
                recommendationEl.className = `recommendation ${type}`;
                confidenceBarEl.style.width = `${confidence}%`;
                confidenceValueEl.textContent = `${confidence}%`;
                
                // –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
                recommendationEl.classList.add('success-animation');
                setTimeout(() => recommendationEl.classList.remove('success-animation'), 500);
            }
            
            function updateCalculationDetails(score1, score2, period, minutes, seconds) {
                const totalScore = score1 + score2;
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ª–∏–≥–∏
                let minutesPerPeriod;
                switch(currentLeague) {
                    case 'nba': minutesPerPeriod = 12; break;
                    case 'fib–∞': minutesPerPeriod = 10; break;
                    case 'cyber': minutesPerPeriod = 5; break;
                }
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è –≤ –º–∏–Ω—É—Ç–∞—Ö
                const elapsedMinutesInPeriod = minutes + seconds / 60;
                const totalElapsedMinutes = (period - 1) * minutesPerPeriod + elapsedMinutesInPeriod;
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è –≤ –º–∏–Ω—É—Ç–∞—Ö
                const remainingMinutesInPeriod = minutesPerPeriod - elapsedMinutesInPeriod;
                const fullPeriodsRemaining = 4 - period;
                const totalRemainingMinutes = remainingMinutesInPeriod + (fullPeriodsRemaining * minutesPerPeriod);
                
                // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π —Ç–µ–º–ø (–æ—á–∫–æ–≤ –≤ –º–∏–Ω—É—Ç—É)
                const currentPace = totalElapsedMinutes > 0 ? totalScore / totalElapsedMinutes : 0;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –¥–µ—Ç–∞–ª–∏
                paceValueEl.textContent = `${currentPace.toFixed(2)} –æ—á/–º–∏–Ω`;
                timeLeftEl.textContent = `${totalRemainingMinutes.toFixed(1)} –º–∏–Ω`;
                thresholdValueEl.textContent = "5.0 –æ—á";
            }
            
            function saveToHistoryList(score1, score2, predictedTotal, lineTotal, betType, confidenceResult, mlBoost) {
                const historyItem = {
                    id: Date.now(),
                    score: `${score1}:${score2}`,
                    predictedTotal: predictedTotal,
                    lineTotal: lineTotal,
                    betType: betType,
                    recommendation: confidenceResult.recommendation,
                    confidence: confidenceResult.adjustment,
                    type: confidenceResult.type,
                    mlBoost: mlBoost || 0,
                    mlEnhanced: mlData.enabled && mlData.totalPredictions > 5,
                    timestamp: new Date().toLocaleTimeString()
                };
                
                calculationHistory.unshift(historyItem);
                if (calculationHistory.length > 10) {
                    calculationHistory = calculationHistory.slice(0, 10);
                }
                
                saveHistory();
                renderHistory();
            }
            
            function renderHistory() {
                historyListEl.innerHTML = '';
                
                if (calculationHistory.length === 0) {
                    historyListEl.innerHTML = '<div style="text-align: center; padding: 20px; color: #666;">–ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—á–µ—Ç–æ–≤ –ø—É—Å—Ç–∞</div>';
                    return;
                }
                
                calculationHistory.forEach(item => {
                    const historyItemEl = document.createElement('div');
                    historyItemEl.className = 'history-item';
                    
                    const confidenceClass = item.mlEnhanced ? 'ml-enhanced' : 
                                          item.confidence > 10 ? 'positive' : 
                                          item.confidence > 5 ? 'neutral' : 'negative';
                    
                    historyItemEl.innerHTML = `
                        <div style="flex: 1;">
                            <div class="history-prediction">${item.score} | ${item.recommendation} ${item.mlEnhanced ? 'ü§ñ' : ''}</div>
                            <div class="history-details">–ü—Ä–æ–≥–Ω–æ–∑: ${item.predictedTotal.toFixed(1)} vs –õ–∏–Ω–∏—è: ${item.lineTotal}</div>
                        </div>
                        <div class="history-confidence ${confidenceClass}">${item.confidence}%</div>
                    `;
                    
                    historyListEl.appendChild(historyItemEl);
                });
            }
            
            function saveHistory() {
                localStorage.setItem('betAnalyzerHistory', JSON.stringify(calculationHistory));
            }
            
            function loadHistory() {
                const savedHistory = localStorage.getItem('betAnalyzerHistory');
                if (savedHistory) {
                    calculationHistory = JSON.parse(savedHistory);
                    renderHistory();
                }
            }
            
            function saveMLData() {
                localStorage.setItem('betAnalyzerMLData', JSON.stringify(mlData));
            }
            
            function loadMLData() {
                const savedMLData = localStorage.getItem('betAnalyzerMLData');
                if (savedMLData) {
                    mlData = JSON.parse(savedMLData);
                    mlToggle.checked = mlData.enabled;
                    updateMLStatus();
                }
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Ç–µ–º—ã
                const savedTheme = localStorage.getItem('betAnalyzerTheme');
                if (savedTheme === 'dark') {
                    isDarkTheme = true;
                    document.body.classList.add('dark-theme');
                    themeIcon.classList.remove('fa-moon');
                    themeIcon.classList.add('fa-sun');
                }
            }
            
            function clearForm() {
                score1Input.value = '';
                score2Input.value = '';
                minutesInput.value = '';
                secondsInput.value = '';
                lineTotalInput.value = '';
                realScore1Input.value = '';
                realScore2Input.value = '';
                
                predictedTotalEl.textContent = '--';
                deviationValueEl.textContent = '--';
                deviationValueEl.className = 'result-value neutral';
                
                showResult('–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞', 'neutral', 0);
                
                paceValueEl.textContent = '-- –æ—á/–º–∏–Ω';
                timeLeftEl.textContent = '-- –º–∏–Ω';
                
                mlBadge.style.display = 'none';
                mlCorrection.style.display = 'none';
                recommendationEl.classList.remove('ml-enhanced');
                recommendationEl.classList.remove('ml-glow');
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å ML
                predictionAccuracyEl.textContent = '--';
                predictionAccuracyEl.className = 'feedback-value neutral';
                recommendationAccuracyEl.textContent = '--';
                recommendationAccuracyEl.className = 'feedback-value neutral';
                predictionErrorEl.textContent = '--';
                predictionErrorEl.className = 'feedback-value neutral';
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ª–∏–≥–µ
            updateLeagueInfo();
        });
    </script>
</body>
</html>
